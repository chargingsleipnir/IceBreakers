(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{105:function(e,t){},145:function(e,t,a){"use strict";a.r(t);var s,n=a(0),r=a.n(n),i=a(63),c=a.n(i),l=a(66),o=a(12),m=(a(75),a(8)),u=a(9),h=a(1),d=a(11),g=a(10),f=a(64),E=a.n(f),p={ENDPOINT:"localhost:5000",SLICE_SIZE:1e5,pages:{USERS:0,CHAT:1},msgTypes:{TEXT:0,CE_FIGHT:1,CE_TRAP:2},iceBreakers:{NONE:0,FIGHT:1,TRAP:2},CE_MSG_DELAY:750,FIGHT_MAX_ROUNDS:5,fightRoundActions:{PUNCH:0,TACKLE:1,KICK:2},fightWinner:{SENDER:0,RESPONDER:1,TIE:2},fightSteps:{INIT:0,ACCEPT:1,CANCEL:2,ACT:3,END:4}},v=a(6),A=a(69),N=a(23),C=a.n(N),b=function(e){var t=e.name,a=e.online,s=e.imgSrc,n=e.imgIsPortrait;return r.a.createElement("div",{className:"d-flex flex-wrap align-items-center"},r.a.createElement("div",{className:"avatarsUserIdent rounded-circle"},r.a.createElement("img",{src:s||C.a,alt:"User Avatar",className:n?"portrait":""})),r.a.createElement("div",{className:"ml-3"},r.a.createElement("div",null,t),r.a.createElement("small",null,a?"":" [offline]")))},S=function(e){var t=e.user,a=e.LikeUserToggle,s=e.ToPageChat,n=t.likeThem?r.a.createElement("i",{className:"fas fa-heart fa-lg"}):r.a.createElement("i",{className:"far fa-heart fa-lg"}),i=t.likeThem&&t.likesMe,c=i?r.a.createElement("i",{className:"fas fa-comment fa-lg fa-fw"}):r.a.createElement("i",{className:"fas fa-comment-slash fa-lg fa-fw"}),l="";if(t.unreadMsg){var o="notificationBadge";null!==t.chatEvent&&(o+=" isEvent"),l=r.a.createElement("span",{className:o})}return r.a.createElement("div",{className:"d-flex flex-wrap justify-content-between align-items-center"},r.a.createElement(b,{name:t.name,online:!0,imgSrc:t.imgSrc,imgIsPortrait:t.isPortrait}),r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("button",{className:"btn pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-3 pr-md-3",onClick:function(){a(t.id,!t.likeThem)}},n),r.a.createElement("button",{className:"btn pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-3 pr-md-3 position-relative",onClick:function(){s(t)},disabled:!i},c,l)))},x=a(17),T=a.n(x),R=function(e){var t=e.users,a=e.LikeUserToggle,s=e.ToPageChat;return r.a.createElement("div",{className:"h-100 w-100 d-flex flex-column"},r.a.createElement("div",{className:"head1 text-center text-white"},"Users"),r.a.createElement("ul",{className:"list-group bg-secondary p-2 flex-grow-1 position-relative"},r.a.createElement(T.a,{className:"FullSpreadAbsElem",scrollViewClassName:"pad10"},t.map((function(e,t){return r.a.createElement("li",{className:"list-group-item m-0Auto maxW1000 innerScrollItem",key:t},r.a.createElement(S,{user:e,LikeUserToggle:a,ToPageChat:s}))})))))},k=function(e){var t=e.ToPageUsers,a=e.user_Chat,s=e.user_Chat_Active;return r.a.createElement("div",null,r.a.createElement("div",{className:"maxW1000 m-0Auto"},r.a.createElement("div",{className:"text-white d-flex align-items-center pt-3 pb-3"},r.a.createElement("button",{onClick:t,className:"btn ml-2 text-white"},r.a.createElement("i",{className:"fas fa-arrow-left fa-lg"})),r.a.createElement("div",{className:"ml-2 fontSize150"},r.a.createElement(b,{name:a.name,online:s,imgSrc:a.imgSrc,imgIsPortrait:a.isPortrait})))))},I=a(14),y=a.n(I),D=a(18),U=a.n(D),P=a(19),B=a.n(P),w=a(20),L=a.n(w),j=function(e){var t,a,s=e.message,n=s.fromSelf,i=s.data,c=e.chatPtnrName,l=function(e){return e===p.fightRoundActions.PUNCH?U.a:e===p.fightRoundActions.TACKLE?B.a:e===p.fightRoundActions.KICK?L.a:void 0};if(i.step===p.fightSteps.INIT){var o=n?"You challenged ".concat(c," to a fight!"):"".concat(c," challenged you to a fight!");return r.a.createElement("div",{className:"d-flex justify-content-center mt-2"},r.a.createElement("div",{className:"messageBox bgLightBlue text-center fromAdmin"},r.a.createElement("div",{className:"messageText text-white"},o),r.a.createElement("div",{className:"messageText text-white"},'"',y.a.emojify(i.msgProvoke),'"')))}if(i.step===p.fightSteps.ACCEPT)return r.a.createElement("div",{className:"d-flex justify-content-center mt-2"},r.a.createElement("div",{className:"messageBox bgLightBlue text-center fromAdmin"},r.a.createElement("div",{className:"messageText text-white"},"Challenge accepted!")));if(i.step===p.fightSteps.CANCEL){var m=n?"You wimped out.":"".concat(c," wimped out.");return r.a.createElement("div",{className:"d-flex justify-content-center mt-2"},r.a.createElement("div",{className:"messageBox bgLightBlue text-center fromAdmin"},r.a.createElement("div",{className:"messageText text-white"},m)))}return i.step===p.fightSteps.ACT?r.a.createElement("div",{className:"d-flex justify-content-center mt-2"},r.a.createElement("div",{className:"messageBox fullW bgLightBlue fromAdmin"},r.a.createElement("div",{className:"d-flex justify-content-between align-items-center mt-1"},r.a.createElement("div",{className:"bg-warning mr-3"},r.a.createElement("img",{src:l(i[n?"actionSent":"actionResp"]),alt:"action",className:"m-1"})),r.a.createElement("div",{className:"mr-3 text-white"},(a=i.roundWinner)===p.fightWinner.SENDER?n?"Ouch!":"Nice!":a===p.fightWinner.RESPONDER?n?"Nice!":"Ouch!":a===p.fightWinner.TIE?"Oof...":void 0),r.a.createElement("div",{className:"bg-warning"},r.a.createElement("img",{src:l(i[n?"actionResp":"actionSent"]),alt:"action",className:"m-1"}))))):i.step===p.fightSteps.END?r.a.createElement("div",{className:"d-flex justify-content-center mt-2"},r.a.createElement("div",{className:"messageBox bgLightBlue text-center fromAdmin"},r.a.createElement("div",{className:"messageText text-white"},(t=i.fightWinner)===p.fightWinner.SENDER?n?"".concat(c," won!"):"You beat ".concat(c,"!"):t===p.fightWinner.RESPONDER?n?"You beat ".concat(c,"!"):"".concat(c," won!"):t===p.fightWinner.TIE?"We have a tie!":void 0),r.a.createElement("div",{className:"messageText text-white"},'"',y.a.emojify(i.msgEnd),'"'))):""},O=a(65),W=a.n(O),F=function(e){var t=e.message,a=e.chatPtnrName;return t.type===p.msgTypes.TEXT?t.fromSelf?r.a.createElement("div",{className:"d-flex justify-content-end mt-2"},r.a.createElement("div",{className:"messageBox bgLightGreen fromSelf"},r.a.createElement("div",{className:"messageText"},y.a.emojify(t.data)))):r.a.createElement("div",{className:"d-flex justify-content-start mt-2"},r.a.createElement("div",{className:"messageBox bg-white fromOther"},r.a.createElement("div",{className:"messageText"},y.a.emojify(t.data)))):t.type===p.msgTypes.CE_FIGHT?r.a.createElement(j,{message:t,chatPtnrName:a}):t.type===p.msgTypes.CE_TRAP?r.a.createElement(W.a,{message:t,chatPtnrName:a}):void 0},H=function(e){var t=e.BackFunc,a=e.title,s=e.subtitle;return r.a.createElement("div",null,r.a.createElement("div",{className:"maxW1000 m-0Auto position-relative"},r.a.createElement("button",{onClick:t,className:"btn text-white posAbsAlignVert50pct"},r.a.createElement("i",{className:"fas fa-arrow-left fa-lg"})),r.a.createElement("div",{className:"head3 text-center text-white"},r.a.createElement("div",null,a),r.a.createElement("small",null,s))))},_=function(e){for(var t=e.ReturnToSelection,a=e.user_Chat_Active,s=e.LaunchChatEvent,n=r.a.createRef(),i=r.a.createRef(),c=r.a.createRef(),l=r.a.createRef(),o=r.a.createRef(),m=[],u=0;u<p.FIGHT_MAX_ROUNDS;u++){var h="fightSelection_"+u;m.push(r.a.createElement("div",{key:u},r.a.createElement("div",{className:"d-flex justify-content-around"},r.a.createElement("label",{className:"noStyleLabel",htmlFor:h+"_"+p.fightRoundActions.PUNCH},r.a.createElement("input",{type:"radio",id:h+"_"+p.fightRoundActions.PUNCH,name:h,value:p.fightRoundActions.PUNCH,defaultChecked:!0}),r.a.createElement("img",{src:U.a,alt:"punch",className:"m-1"})),r.a.createElement("label",{className:"noStyleLabel ml-1 mr-1",htmlFor:h+"_"+p.fightRoundActions.TACKLE},r.a.createElement("input",{type:"radio",id:h+"_"+p.fightRoundActions.TACKLE,name:h,value:p.fightRoundActions.TACKLE}),r.a.createElement("img",{src:B.a,alt:"tackle",className:"m-1"})),r.a.createElement("label",{className:"noStyleLabel",htmlFor:h+"_"+p.fightRoundActions.KICK},r.a.createElement("input",{type:"radio",id:h+"_"+p.fightRoundActions.KICK,name:h,value:p.fightRoundActions.KICK}),r.a.createElement("img",{src:L.a,alt:"kick",className:"m-1"}))),u<p.FIGHT_MAX_ROUNDS-1?r.a.createElement("hr",{className:"bg-light mt-2 mb-2"}):""))}return r.a.createElement("div",{className:"h-100 w-100 d-flex flex-column"},r.a.createElement(H,{BackFunc:t,title:"Fight",subtitle:a?"":" [user offline]"}),r.a.createElement("div",{className:"bg-secondary p-2 flex-grow-1 position-relative",role:"group"},r.a.createElement("fieldset",{disabled:!a},r.a.createElement("form",{ref:function(e){return n=e},className:"maxW1000 m-0Auto reimplementScroll"},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"head4 text-light"},"Provocation"),r.a.createElement("input",{type:"text",className:"form-control",ref:i,placeholder:"e.g. Put 'em up!"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"head4 text-light mb-2"},"Actions"),m),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"head4 text-light"},"Win message"),r.a.createElement("input",{type:"text",className:"form-control",ref:c,placeholder:"e.g. Don't mess with the champ!"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"head4 text-light"},"Lose message"),r.a.createElement("input",{type:"text",className:"form-control",ref:l,placeholder:"e.g. Pfft, barely a flesh wound..."})),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"head4 text-light"},"Tie message"),r.a.createElement("input",{type:"text",className:"form-control",ref:o,placeholder:"e.g. Did we just become best friends?"})),r.a.createElement("button",{type:"button",className:"btn bgLightBlue text-white m-0Auto innerScrollItem",onClick:function(e){e.preventDefault();for(var t=[],a=0;a<p.FIGHT_MAX_ROUNDS;a++)for(var r=n.elements["fightSelection_"+a],m=0;m<r.length;m++)r[m].checked&&t.push(parseInt(r[m].value));var u=i.current.value,h=c.current.value,d=l.current.value,g=o.current.value;s({type:p.msgTypes.CE_FIGHT,data:{step:p.fightSteps.INIT,msgProvoke:u}},!1),setTimeout((function(){s({type:p.msgTypes.CE_FIGHT,data:{step:p.fightSteps.INIT,msgProvoke:u,msgWin:h,msgLose:d,msgTie:g,actionsSent:t,actionsResp:[]}},!0)}),p.CE_MSG_DELAY)}},"Send")))))},K=function(e){var t=e.ReturnToSelection;return r.a.createElement("div",{className:"h-100 w-100 d-flex flex-column"},r.a.createElement(H,{BackFunc:t,title:"Trap",subtitle:""}),r.a.createElement("div",{className:"bg-secondary p-2 flex-grow-1 position-relative",role:"group"}))},G=function(e){Object(d.a)(a,e);var t=Object(g.a)(a);function a(e){var s;return Object(m.a)(this,a),(s=t.call(this,e)).state={iceBreaker:p.iceBreakers.NONE},s.ReturnToSelection=s.ReturnToSelection.bind(Object(h.a)(s)),s}return Object(u.a)(a,[{key:"ReturnToSelection",value:function(){this.setState({iceBreaker:p.iceBreakers.NONE})}},{key:"render",value:function(){var e=this;return this.state.iceBreaker===p.iceBreakers.NONE?r.a.createElement("div",{className:"h-100 w-100 d-flex flex-column"},r.a.createElement(H,{BackFunc:this.props.ReturnToChat,title:"Ice Breakers",subtitle:this.props.user_Chat_Active?"":" [user offline]"}),r.a.createElement("div",{className:"bg-secondary p-2 flex-grow-1 position-relative",role:"group"},r.a.createElement(T.a,{className:"FullSpreadAbsElem",scrollViewClassName:"d-flex flex-column pad10"},r.a.createElement("button",{type:"button",className:"btn btn-lg bgLightBlue text-white m-0Auto minW50pct maxW1000 innerScrollItem",onClick:function(){return e.setState({iceBreaker:p.iceBreakers.FIGHT})},disabled:!this.props.user_Chat_Active},r.a.createElement("i",{className:"fas fa-fist-raised fa-lg transFlipYRot90"}),r.a.createElement("span",{className:"ml-4"},"FIGHT"))))):this.state.iceBreaker===p.iceBreakers.FIGHT?r.a.createElement(_,{ReturnToSelection:this.ReturnToSelection,user_Chat_Active:this.props.user_Chat_Active,LaunchChatEvent:this.props.LaunchChatEvent}):this.state.iceBreaker===p.iceBreakers.TRAP?r.a.createElement(K,{ReturnToSelection:this.ReturnToSelection,user_Chat_Active:this.props.user_Chat_Active,LaunchChatEvent:this.props.LaunchChatEvent}):void 0}}]),a}(n.Component),M=function(e){var t=e.eventData,a=t.fromSelf,s=t.data,n=e.SendMessage,i=e.UpdateEventData,c=e.ClearEvent,l=e.chatPtnrName,o=function(e,t){if(e===p.fightRoundActions.PUNCH){if(t===p.fightRoundActions.PUNCH)return p.fightWinner.TIE;if(t===p.fightRoundActions.TACKLE)return p.fightWinner.SENDER;if(t===p.fightRoundActions.KICK)return p.fightWinner.RESPONDER}else if(e===p.fightRoundActions.TACKLE){if(t===p.fightRoundActions.PUNCH)return p.fightWinner.RESPONDER;if(t===p.fightRoundActions.TACKLE)return p.fightWinner.TIE;if(t===p.fightRoundActions.KICK)return p.fightWinner.SENDER}else if(e===p.fightRoundActions.KICK){if(t===p.fightRoundActions.PUNCH)return p.fightWinner.SENDER;if(t===p.fightRoundActions.TACKLE)return p.fightWinner.RESPONDER;if(t===p.fightRoundActions.KICK)return p.fightWinner.TIE}},m=function(e,t){e.preventDefault(),s.actionsResp.push(t);var a=s.actionsSent[s.actionsResp.length-1];n({type:p.msgTypes.CE_FIGHT,data:{step:p.fightSteps.ACT,roundWinner:o(a,t),actionSent:a,actionResp:t}},!1),s.actionsResp.length>=s.actionsSent.length?setTimeout((function(){for(var e=0,t=0,a=0;a<s.actionsSent.length;a++){var r=o(s.actionsSent[a],s.actionsResp[a]);r===p.fightWinner.SENDER?e++:r===p.fightWinner.RESPONDER&&t++}var i=p.fightWinner.TIE,l=s.msgTie;e>t?(i=p.fightWinner.SENDER,l=s.msgWin):e<t&&(i=p.fightWinner.RESPONDER,l=s.msgLose),c(),n({type:p.msgTypes.CE_FIGHT,data:{step:p.fightSteps.END,fightWinner:i,msgEnd:l}},!1)}),p.CE_MSG_DELAY):setTimeout((function(){i({step:p.fightSteps.ACT})}),p.CE_MSG_DELAY)};return s.step===p.fightSteps.INIT?a?r.a.createElement("div",{className:"d-flex justify-content-center mt-2"},r.a.createElement("div",{className:"messageBox bgLightBlue fromAdmin"},r.a.createElement("div",{className:"messageText text-center text-white"},"Awaiting response..."))):r.a.createElement("div",{className:"d-flex justify-content-center mt-2"},r.a.createElement("div",{className:"messageBox bgLightBlue fromAdmin"},r.a.createElement("div",{className:"messageText text-center text-white"},"Your response?"),r.a.createElement("div",{className:"d-flex justify-content-around mt-1 p-2"},r.a.createElement("button",{className:"btn bg-warning mr-3",onClick:function(e){e.preventDefault(),n({type:p.msgTypes.CE_FIGHT,data:{step:p.fightSteps.ACCEPT}},!1),setTimeout((function(){i({step:p.fightSteps.ACT})}),p.CE_MSG_DELAY)}},"Fight"),r.a.createElement("button",{className:"btn bg-danger text-white",onClick:function(e){e.preventDefault(),n({type:p.msgTypes.CE_FIGHT,data:{step:p.fightSteps.CANCEL}},!1),c()}},"Flee")))):s.step===p.fightSteps.ACT?a?r.a.createElement("div",{className:"d-flex justify-content-center mt-2"},r.a.createElement("div",{className:"messageBox bgLightBlue fromAdmin"},r.a.createElement("div",{className:"messageText text-center text-white"},"Select a move:"),r.a.createElement("div",{className:"d-flex justify-content-around mt-1 p-2"},r.a.createElement("button",{className:"btn bg-warning mr-3",onClick:function(e){return m(e,p.fightRoundActions.PUNCH)}},r.a.createElement("img",{src:U.a,alt:"punch",className:"m-1"})),r.a.createElement("button",{className:"btn bg-warning mr-3",onClick:function(e){return m(e,p.fightRoundActions.TACKLE)}},r.a.createElement("img",{src:B.a,alt:"tackle",className:"m-1"})),r.a.createElement("button",{className:"btn bg-warning",onClick:function(e){return m(e,p.fightRoundActions.KICK)}},r.a.createElement("img",{src:L.a,alt:"kick",className:"m-1"}))))):r.a.createElement("div",{className:"d-flex justify-content-center mt-2"},r.a.createElement("div",{className:"messageBox bgLightBlue fromAdmin"},r.a.createElement("div",{className:"messageText text-center text-white"},l," is selecting a move..."))):""},J=function(e){var t=e.ReturnToSelection;return r.a.createElement("div",{className:"h-100 w-100 d-flex flex-column"},r.a.createElement(H,{BackFunc:t,title:"Trap",subtitle:""}),r.a.createElement("div",{className:"bg-secondary p-2 flex-grow-1 position-relative",role:"group"}))},Q=function(e){Object(d.a)(a,e);var t=Object(g.a)(a);function a(e){var s;return Object(m.a)(this,a),(s=t.call(this,e)).state={msgText:"",preppingChatEvent:!1},s.SendText=s.SendText.bind(Object(h.a)(s)),s.LaunchChatEvent=s.LaunchChatEvent.bind(Object(h.a)(s)),s.ChooseIceBreaker=s.ChooseIceBreaker.bind(Object(h.a)(s)),s.ReturnToChat=s.ReturnToChat.bind(Object(h.a)(s)),s}return Object(u.a)(a,[{key:"SendText",value:function(e){e.preventDefault(),this.state.msgText?this.props.user_Chat_Active?(console.log('SendMessage called in Chat.js, msgText: "'.concat(this.state.msgText,'" to user: "').concat(this.props.user_Chat.id,'"')),this.setState({msgText:""}),this.props.SendMessage({type:p.msgTypes.TEXT,data:this.state.msgText},!1)):console.warn("Message not sent, that user has been removed from the server."):console.warn("Message not sent, must send more than nothing.")}},{key:"LaunchChatEvent",value:function(e,t){this.props.user_Chat_Active?(this.setState({preppingChatEvent:!1}),this.props.SendMessage(e,t)):console.warn("Message not sent, that user has been removed from the server.")}},{key:"ChooseIceBreaker",value:function(e){e.preventDefault(),this.setState({preppingChatEvent:!0})}},{key:"ReturnToChat",value:function(){this.setState({preppingChatEvent:!1})}},{key:"render",value:function(){var e=this;if(this.state.preppingChatEvent)return r.a.createElement(G,{ReturnToChat:this.ReturnToChat,user_Chat_Active:this.props.user_Chat_Active,LaunchChatEvent:this.LaunchChatEvent});var t=!this.props.user_Chat_Active||this.props.user_Chat.disableSend,a="";if(this.props.user_Chat.chatEvent&&this.props.user_Chat.chatEventDisp){var s=this.props.user_Chat.chatEvent;s.type===p.msgTypes.CE_FIGHT?a=r.a.createElement(M,{eventData:s,SendMessage:this.props.SendMessage,UpdateEventData:this.props.UpdateEventData,ClearEvent:this.props.ClearEvent,chatPtnrName:this.props.user_Chat.name}):s.type===p.msgTypes.CE_FIGHT&&(a=r.a.createElement(J,{eventData:s,SendMessage:this.props.SendMessage,UpdateEventData:this.props.UpdateEventData,ClearEvent:this.props.ClearEvent,chatPtnrName:this.props.user_Chat.name}))}return r.a.createElement("div",{className:"h-100 d-flex flex-column justify-content-between"},r.a.createElement(k,{ToPageUsers:this.props.ToPageUsers,user_Chat:this.props.user_Chat,user_Chat_Active:this.props.user_Chat_Active}),r.a.createElement("div",{className:"flex-grow-1 bg-secondary"},r.a.createElement("div",{className:"maxW1000 m-0Auto h-100 position-relative"},r.a.createElement(T.a,{className:"FullSpreadAbsElem",scrollViewClassName:"pad10"},this.props.user_Chat.messages.map((function(t,a){return r.a.createElement("div",{className:"innerScrollItem",key:a},r.a.createElement(F,{message:t,chatPtnrName:e.props.user_Chat.name}))})),r.a.createElement("div",{className:"innerScrollItem"},a)))),r.a.createElement("div",{className:"bg-secondary"},r.a.createElement("form",{className:"maxW1000 m-0Auto d-flex align-items-stretch p-2"},r.a.createElement("button",{className:"btn noBorder bgLightBlue text-white mr-2",onClick:this.ChooseIceBreaker,disabled:t},r.a.createElement("i",{className:"fas fa-handshake fa-lg"})),r.a.createElement("input",{className:"form-control form-control-lg flex-grow-1 noBorder",type:"text",placeholder:"message",value:this.props.user_Chat_Active?this.state.msgText:"",onChange:function(t){return e.setState({msgText:t.target.value})},onKeyPress:function(t){return"Enter"===t.key?e.SendText(t):null},disabled:t}),r.a.createElement("button",{className:"btn noBorder bg-white",onClick:this.SendText,disabled:t},r.a.createElement("i",{className:"fas fa-paper-plane fa-lg"})))))}}]),a}(n.Component),Z=function(e){Object(d.a)(a,e);var t=Object(g.a)(a);function a(e){var s;return Object(m.a)(this,a),(s=t.call(this,e)).state={page:p.pages.USERS,users:[],user_Chat:null},e.socket.on("RecNewUser",(function(e){console.log('Adding user: "'.concat(e.id,'"')),s.setState({users:[].concat(Object(A.a)(s.state.users),[e])})})),e.socket.on("RemoveUser",(function(e){console.log('Removing user: "'.concat(e,'"'));var t=s.state.users.findIndex((function(t){return t.id===e}));s.state.users.splice(t,1),s.setState({users:s.state.users})})),e.socket.on("RecLikeToggle",(function(e){console.log('Liked by user: "'.concat(e.socketID,'"'));var t=s.state.users.findIndex((function(t){return t.id===e.socketID}));s.state.users[t].likesMe=e.likesMe,s.setState({users:s.state.users})})),e.socket.emit("GetUsers",{},(function(e){for(var t=0;t<e.length;t++)console.log('Adding users: "'.concat(e[t].id,'"'));s.setState({users:e})})),e.socket.on("RecMessage",(function(e){console.log('Received message, type: "'.concat(e.msgData.type,'" chatting with user: "').concat(e.msgData.chatPtnrID,'", with data:'),e.msgData.data),s.setState((function(t){var a=t.users.findIndex((function(t){return t.id===e.msgData.chatPtnrID})),n=Object(v.a)({},e.msgData,{fromSelf:!1});e.isEvent?(t.users[a].chatEvent=n,t.users[a].chatEventDisp=!0,t.users[a].disableSend=!0):(t.users[a].messages.push(n),t.users[a].chatEventDisp=!1);var r=!0;return s.state.user_Chat&&s.state.user_Chat.id===e.msgData.chatPtnrID&&(r=!1),t.users[a].unreadMsg=r,{users:t.users,user_Chat:!1===r?t.users[a]:null}}))})),e.socket.on("RecUpdateEvent",(function(e){s.setState((function(t){var a=t.users.findIndex((function(t){return t.id===e.chatPtnrID})),s=Object(v.a)({},t.users[a].chatEvent,{fromSelf:!1});return s.data=Object(v.a)({},s.data,{},e.updatedData),t.users[a].chatEvent=s,t.users[a].chatEventDisp=!0,{users:t.users,user_Chat:t.users[a]}}))})),e.socket.on("RecClearEvent",(function(e){s.setState((function(t){var a=t.users.findIndex((function(t){return t.id===e}));return t.users[a].chatEvent=null,t.users[a].disableSend=!1,{users:t.users,user_Chat:t.users[a]}}))})),s.ToPageUsers=s.ToPageUsers.bind(Object(h.a)(s)),s.LikeUserToggle=s.LikeUserToggle.bind(Object(h.a)(s)),s.ToPageChat=s.ToPageChat.bind(Object(h.a)(s)),s.SendMessage=s.SendMessage.bind(Object(h.a)(s)),s.UpdateEventData=s.UpdateEventData.bind(Object(h.a)(s)),s.ClearEvent=s.ClearEvent.bind(Object(h.a)(s)),s}return Object(u.a)(a,[{key:"ToPageUsers",value:function(){this.setState({user_Chat:null,page:p.pages.USERS})}},{key:"LikeUserToggle",value:function(e,t){this.props.socket.emit("LikeUserToggle",{userID:e,isLiked:t}),this.setState((function(a){return{users:a.users.map((function(a){return a.id===e?Object(v.a)({},a,{likeThem:t}):a}))}}))}},{key:"ToPageChat",value:function(e){this.setState((function(t){return{users:t.users.map((function(t){return t.id===e.id?Object(v.a)({},t,{unreadMsg:!1}):t})),user_Chat:e,page:p.pages.CHAT}}))}},{key:"SendMessage",value:function(e,t){this.props.socket.emit("SendMessage",{msgData:Object(v.a)({},e,{chatPtnrID:this.state.user_Chat.id}),isEvent:t}),this.setState((function(a){var s=a.users.findIndex((function(e){return e.id===a.user_Chat.id})),n=Object(v.a)({},e,{fromSelf:!0});return t?(a.users[s].chatEvent=n,a.users[s].chatEventDisp=!0,a.users[s].disableSend=!0):(a.users[s].messages.push(n),a.users[s].chatEventDisp=!1),{users:a.users,user_Chat:a.users[s]}}))}},{key:"UpdateEventData",value:function(e){this.props.socket.emit("UpdateEvent",{updatedData:e,chatPtnrID:this.state.user_Chat.id}),this.setState((function(t){var a=t.users.findIndex((function(e){return e.id===t.user_Chat.id})),s=Object(v.a)({},t.users[a].chatEvent,{fromSelf:!0});return s.data=Object(v.a)({},s.data,{},e),t.users[a].chatEvent=s,t.users[a].chatEventDisp=!0,console.log(t.users[a].chatEvent),{users:t.users,user_Chat:t.users[a]}}))}},{key:"ClearEvent",value:function(){this.props.socket.emit("ClearEvent",this.state.user_Chat.id),this.setState((function(e){var t=e.users.findIndex((function(t){return t.id===e.user_Chat.id}));return e.users[t].chatEvent=null,e.users[t].disableSend=!1,{users:e.users,user_Chat:e.users[t]}}))}},{key:"render",value:function(){var e=this;if(this.state.page===p.pages.USERS)return r.a.createElement(R,{users:this.state.users,LikeUserToggle:this.LikeUserToggle,ToPageChat:this.ToPageChat});if(this.state.page===p.pages.CHAT){var t=!0;return this.state.user_Chat&&-1===this.state.users.findIndex((function(t){return t.id===e.state.user_Chat.id}))&&(t=!1),r.a.createElement(Q,{user_Chat:this.state.user_Chat,user_Chat_Active:t,SendMessage:this.SendMessage,UpdateEventData:this.UpdateEventData,ClearEvent:this.ClearEvent,ToPageUsers:this.ToPageUsers})}}}]),a}(n.Component),V=function(e){var t=e.percent,a={width:t+"%"};return r.a.createElement("div",{id:"ImageUploadBar",className:"progress position-absolute h-100 w-100"},r.a.createElement("div",{role:"progressbar",className:"progress-bar progress-bar-striped bg-success progress-bar-animated transitionNone",style:a,"aria-valuenow":t,"aria-valuemin":"0","aria-valuemax":"100"}))},Y=window.URL||window.webkitURL,X=["jpg","jpeg","png","gif"],q=function(e){var t=e.GetImgDetails,a=e.imgSrc,s=e.isPortrait,n=e.disabled,i=e.willLoadFile,c=e.percent,l=i?r.a.createElement(V,{percent:c}):"";return r.a.createElement("div",{className:"mt-2"},r.a.createElement("div",{id:"AvatarSelected",className:"avatarsUserIdent rounded-circle mt-1 mb-1 mt-md-3 mb-md-3 mt-lg-5 mb-lg-5"},r.a.createElement("img",{src:a,alt:"User avatar",className:s?"portrait":""})),r.a.createElement("input",{id:"HiddenFileUploader",placeholder:"File",className:"d-none",type:"file",accept:"image/*",capture:"user",onChange:function(e){if(1===e.target.files.length){var a=e.target.value,s=a.slice(2+(a.lastIndexOf(".")-1>>>0));if(-1!==X.indexOf(s)){var n=e.target.files[0],r=new Image;r.onload=function(){console.log("img width: "+r.width+", height: "+r.height),t(s,n,r.src,r.height>r.width)},r.src=Y.createObjectURL(n)}else alert("Image must have extension: jpg, jpeg, png, or gif")}else alert("Can only use 1 photo at a time.")},disabled:n}),r.a.createElement("button",{className:"btn btn-secondary btn-lg btn-block mt-2 position-relative",onClick:function(){document.getElementById("HiddenFileUploader").click()},disabled:n},r.a.createElement("span",null,"Upload picture"),l))};s=E()();var z=function(e){Object(d.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={file:null,percent:0,disabled:!1,signedIn:!1},n.nameField=r.a.createRef(),n.fileExt="",n.fileSrc=C.a,n.isPortrait=!1,n.slice=null,n.fileReader=null,s.on("ImageReqSlice",(function(e){var t=e.currentSlice*p.SLICE_SIZE;n.slice=n.state.file.slice(t,t+Math.min(p.SLICE_SIZE,n.state.file.size-t));var a=t/n.state.file.size*100;n.setState({percent:a}),n.fileReader.readAsArrayBuffer(n.slice)})),s.on("ImageUploadError",(function(e){console.log("Could not upload image due to error: ",e),n.fileReader.abort(),alert("Error uploading image, restoring default, my bad. :("),n.fileExt="",n.fileSrc=C.a,n.isPortrait=!1,n.setState({file:null,disabled:!1,percent:0})})),s.on("ImageUploadEnd",(function(e){n.fileReader.onload=function(e){console.log("Image upload successful"),n.setState({file:null,percent:100}),s.emit("AddUser",{name:n.nameField.current.value,ext:n.fileExt,isPortrait:n.isPortrait},(function(){n.setState({signedIn:!0})}))},n.fileReader.readAsDataURL(n.state.file)})),n.SubmitProfile=n.SubmitProfile.bind(Object(h.a)(n)),n.GetImgDetails=n.GetImgDetails.bind(Object(h.a)(n)),n}return Object(u.a)(a,[{key:"SubmitProfile",value:function(e){var t=this;e.preventDefault();var a=this.nameField.current.value;""!==a?(this.setState({disabled:!0}),console.log("Submit clicked - Name: ".concat(a,", Ext: ").concat(this.fileExt,", src: ").concat(this.fileSrc,", isPortrait: ").concat(this.isPortrait,", file:"),this.state.file),null===this.state.file?s.emit("AddUser",{name:a,ext:this.fileExt,isPortrait:this.isPortrait},(function(){t.setState({signedIn:!0})})):(this.slice=this.state.file.slice(0,p.SLICE_SIZE),this.fileReader=new FileReader,this.fileReader.onload=function(e){s.emit("ImageUploadSlice",{ext:t.fileExt,name:a,type:t.state.file.type,size:t.state.file.size,data:e.target.result})},this.fileReader.readAsArrayBuffer(this.slice))):alert("Name required")}},{key:"GetImgDetails",value:function(e,t,a,s){console.log("Ext: ".concat(e,", src: ").concat(a,", isPortrait: ").concat(s,", file:"),t),this.fileExt=e,this.fileSrc=a,this.isPortrait=s,this.setState({file:t})}},{key:"render",value:function(){var e=this.state.disabled&&null!==this.state.file;return this.state.signedIn?r.a.createElement(Z,{socket:s}):r.a.createElement("div",{className:"position-relative h-100"},r.a.createElement("div",{className:"container-fluid h-100 d-flex flex-column justify-content-center align-items-center"},r.a.createElement("div",null,r.a.createElement("div",{className:"head1 text-center text-white"},"Welcome"),r.a.createElement("hr",{className:"bg-light mt-1 mb-2 mt-md-2 mb-md-3 mt-lg-3 mb-lg-4"}),r.a.createElement("input",{type:"text",className:"form-control form-control-lg",placeholder:"Name",ref:this.nameField,onKeyPress:function(e){return"Enter"===e.key?e.target.blur():null},disabled:this.state.disabled})),r.a.createElement("div",null,r.a.createElement(q,{GetImgDetails:this.GetImgDetails,imgSrc:this.fileSrc,isPortrait:this.isPortrait,disabled:this.state.disabled,willLoadFile:e,percent:this.state.percent}),r.a.createElement("button",{className:"btn btn-primary btn-lg btn-block mt-2",onClick:this.SubmitProfile,disabled:this.state.disabled},"Sign In"))))}}]),a}(n.Component),$=function(){return r.a.createElement(l.a,null,r.a.createElement(o.a,{path:"/*",exact:!0,component:z}))};c.a.render(r.a.createElement($,null),document.querySelector("#root"))},18:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAC33pUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHja7ZdBkuQoDEX3nGKOgCSExHGwgYi+wRx/PphyVmZVd8T09GIWacIGy+IL9GRnVeh//xjhLxxUJIak5rnkHHGkkgpXDDxex9VTTOu6Dt6PcP9kD/cDhknQy3Wb+/avsOtjgqVtP57twc6t41toP/gQlBl5Rtt+voWELzvt+1D2vJo+bWefR9s2vbrX+2RIRlPoCQfuQhJxzTOKXGfFqbiSJDiR2Bo7rjz9vstduIcvybtHL7mLddvlORUh5u2QX3K07aTf525l6POK6BH56YHJHeJL7sZoPka/dldTRqZy2Jv62MoawfFAKmVNy2iGUzG21QqaY4sniDXQPNDOQIUY2R6UqFGlQX31J51YYuLOhp75ZFk2F+PCp0wEaTYabFKkBbBgOUFNYOZ7LbTilhXvJEfkRvBkghhhxpcWvjP+TruFxpilSxT9zhXWxbOmsYxJbl7hBSA0dk515Xe18Klu4iewAoK60uzYYI3HJXEoPWpLFmeBn8YU4vVqkLUtgBQhtmIxJCAQM4lSpmjMRoQ8OvhUrJxR9gcIkCo3CgNsRDLgOM/YmGO0fFn5MuPTAhAqGa+Kg1AFrJQU9WPJUUNVRVNQ1aymrkVrlpyy5pwtz29UNbFkatnM3IpVF0+unt3cvXgtXASfMC25WCheSqkVQSukK2ZXeNR68CFHOvTIhx1+lKOeKJ8znXrm004/y1kbN2l4/VtuFpq30mqnjlLqqWvP3br30utArQ0ZaejIw4aPMupNbVN9pkYv5H5NjTa1SSwtP3tQg9nsQ4Lm50QnMxDjRCBukwAKmiez6JQST3KTWSyMl0IZ1EgnnEaTGAimTqyDbnYPcr/kFjT9K278M3JhovsT5MJEt8l95fYNtVbXL4osQPMtnDmNMvBhg0P3yl7nb9Jv9+G/CryF3kJvobfQW+gt9Bb6/wgN/PGAfzXDP+WRkYgEmS+0AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfkBQ4VEhuBQtPTAAABqklEQVRIx52UTShEURTHf8akzEIWSjEbSVGUQqmRhRKlFCEbzWKUrY+djWKDDaXUyEYNpSwosaJZzNJHRFmw8VEWs5mZfH9cC8fzZrzx3n3/uzjv/u89/3vOueddsEMec6RIMIMHV5hEyRh3J3BiCBxaLduH9WR8PbqLoN+IoAeX6GSLTTqsF3NNyTThI26xx0clBwwRIGZKSJAj1kuUABDjyCQK8EGIDYIArNOfLcxWI1OrsST2mDB+61uI2zTT9w0U4SdinQJMMUacea4zUnhnmXymmQAe2KHX5JMmkB27tJNigVLeGCBBse41zqJQXBFFoZjR74NBKeEiinsK9QXaROCWJRrcdGKd6UJr9X8m+LTsXA0B9d+ix1ERf1GvX4GRtKa+1H3YangW13OxQT2BqLhNUcYbCsWFjntA3GMALMusz7lARFy+S1fBZ/bH1QpekqbzAdZEsMWZQLNsHzaYWmG2nQmMyvZqE7cnXLmTRqqSRj4zcQtiQ04i2EehOM1g71Ao7pxEUADASwa7AkAJAXsBj5yYjlWxr/YpDJDkhsY/fBdhun8mX1m4re0W+oxcAAAAAElFTkSuQmCC"},19:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAC3XpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHja7ZdBkuQoDEX3nGKOgCSExHGwgYi+wRx/PphyVmZVd8T09GIWacIGy/IX6AlnVeh//xjhLxxUJIak5rnkHHGkkgpXDDxex9VTTOu6Dt6PcP9kD/cDhknQy3Wb+/avsOvjBUvbfjzbg51bx7fQfvAhKDPyjLb9fAsJX3ba96Hs92r6tJx9Hm3b9Ope75MhGU2hJxy4C0nENc8ocp0Vp+JKkuBEYmt8Xfn73IV7+JK8e/SSu1i3XZ5TEWLeDvklR9tO+n3uVoY+z4gekZ8emNwhvuRujOZj9Gt1NWVkKoe9qI+lrBEcD6RS1msZzXAqxrZaQXMs8QSxBpoH2hmoECPbgxI1qjSor/6kE1NM3NnQM58sy+ZiXPiUiSDNRoNNirQgDk4nqAnMfM+FVtyy4p3kiNwInkwQA7mvLXxn/J12C40xS5co+p0rzItn1WAak9y8wgtAaOyc6srvauFT3cRPYAUEdaXZscAaj0viUHrUlizOAj+NKcRra5C1LYAUIbZiMiQgEDOJUqZozEaEPDr4VMycUfYHCJAqNwoDbEQy4DjP2HjHaPmy8mXGpwUgVDI2iYNQBayUFPVjyVFDVUVTUNWspq5Fa5acsuacLc9vVDWxZGrZzNyKVRdPrp7d3L14LVwEnzAtuVgoXkqpFUErpCvervCo9eBDjnTokQ87/ChHPVE+Zzr1zKedfpazNm7SsP1bbhaat9Jqp45S6qlrz92699LrQK0NGWnoyMOGjzLqTW1TfaZGL+R+TY02tUksLT97UIPZ7EOC5udEJzMQ40QgbpMACpons+iUEk9yk1ksjE2hDGqkE06jSQwEUyfWQTe7B7lfcgua/hU3/hm5MNH9CXJhotvkvnL7hlqr6xdFFqC5C2dOowx82ODQvbLX+Zv02334rwJvobfQW+gt9BZ6C72F/j9CA3884F/N8A+Ry5GC1Ba05AAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH5AUOFRENXrs1QQAAAcFJREFUSMellcsrRUEcxz/I48pjgVKSSN0k5S7svEpecUlZKRYWNlKytCDPhT/AQlZISSnZCHksLMRGoUgeG6+8blyhOBZ3TOece48z9/jN4sz8zny+c+b85vebKIItkQJi8OHQmvGhoTFJpBM8nTc00bpUAPMqNbhkv96JwKNF39IiTONY9nED8E0p2yTgpYICovCxwwJ79pIZTHHABtXEM8iz/COBtkqu6u8s49AEB9or1fZwEnMh4UD7oPJvvIgLA3BKPJBKJ0/C80K2Nd6AP2jNFvEuS0qPWeFVfIb46HPixPs8IV8bGs8Ux1hjwrSNHjknlw4KrdafFdNvaKbbIPBAskro9nSI37SZURUBL/c6ZNMU/1QViWgameEWDT8eFg0S4+GktZsUIN8UjcLw68OWQWA7PNjDbtCJaFOFIxjgSwe+i+cVCSp4Mms6+JhO0mRujqkIrEj4jnbhq5Df4rYXuJIC67oCMi98y/YCrboNvDEkCm2WrNhee4k6Tg3ZWAxAn6wQLnsJF/26O+JS+M7EuFctmDksCeBEeJpkqmWqnoh6jrimPChC007vzjyR5tc4thE0NIb5h5Xg+e3+AJ5bIiPN9MLVAAAAAElFTkSuQmCC"},20:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAC3npUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHja7ZdBkuQoDEX3nGKOgCSExHGwgYi+wRx/PphyVmZVd8T09GIWacIGy+IL9ICsCv3vHyP8hYuKxJDUPJecI65UUuGKhsfrumqKaT3XxfsT3p/s4f7AMAlquV5z3/4Vdn10sLTtx7M92Ll1fAvtDx+CMiPPaNvPt5DwZaf9HsruV9On6ez7aNumV/X6ngzJaAo94cBdSCKeeUaR6664FU+SBCcSW+2y7On73IW7+ZK8u/WSu1i3XZ5TEWLeDvklR9tO+n3uVoY+j4gekZ8+mNwhvuRujOZj9Gt2NWVkKoc9qY+prBYcD6RSVreMYrgVbVuloDimeIJYA80D5QxUiJHtQYkaVRrUV33SiSEm7myomU+WZXMxLnzKRJBmocEGDC2Ig9MJagIz32OhFbeseCc5IjeCJxPECD2+lPCd8XfKLTTGXLpE0e9cYVw81zSGMcnNJ7wAhMbOqa78rhI+rZv4CayAoK40OyZY43FJHEqPtSWLs8BPYwrx2hpkbQsgRYitGAwJCMRMopQpGrMRIY8OPhUjZyz7AwRIlRuFATYiGXCcZ2z0MVq+rHyZcbQAhErGVvG5UQArJcX6seRYQ1VFU1DVrKauRWuWnLLmnC3PM6qaWDK1bGZuxaqLJ1fPbu5evBYugiNMSy4WipdSakXQCumK3hUetR58yJEOPfJhhx/lqCeWz5lOPfNpp5/lrI2bNGz/lpuF5q202qljKfXUtedu3XvpdWCtDRlp6MjDho8y6k1tU32mRi/kfk2NNrVJLC0/e1CD2exDguZxopMZiHEiELdJAAuaJ7PolBJPcpNZLIxNoQxqpBNOo0kMBFMn1kE3uwe5X3ILmv4VN/4ZuTDR/QlyYaLb5L5y+4Zaq+sXRRaguQtnTqMMHGxw6F7Z6/xN+u06/FeBt9Bb6C30FnoLvYXeQv8foYE/HvCvZvgHu7SRhcbx1mEAAAACYktHRAD/h4/MvwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB+QFDhUTBvtfjksAAAGPSURBVEjHvZXNK0RRGIefGcr4SDKJLGQWJEqyIqws1SQKUxILVqaZyPwBFrNRKDYiWxtkJUVRFjayNomNhjEzZTUW0hyLe7ruzLl3rrkT71m95/e7zz3nPV9QYpThYhwfD84RewgEW84BQrY1p4BDHbFi6fHip85KrOJKRyyYOmp5RvBIpTXiWgKy+E30XqkuWk+jhltpytCnqC5iCASv1mOAJp4k4oUWRZ2RWlBHTrBBiHqjqZWEtN1RpSDuEQgSVAIeLqUzTpvR1M+HFA4UwLRUQkBQL7rg1JVjm9I/DXOOJ0c7owFI4mOfSb03m/+nqIFu3sLsGrKkWvELG0CKYUO2qq5HI3EbxBIBUgg+WafMbElHbQBveIAuqq32RI9tHeYLHy97QOzHXF4AdExUOfpDbALtjHNkP4IdRemkmzQCwc1vppAPWJYnVlMHtE53EVfPmNwpWkSKB2zzZcj8NBULOKCZWU7IAJDmvfgialHBCBE6nKyCSbhLfZn+BCBKfy+1CzbgHOFljkH+J74ByqfzaSxfi4YAAAAASUVORK5CYII="},23:function(e,t,a){e.exports=a.p+"static/media/SpeechlessGuy.8d8d757b.png"},65:function(e,t){},70:function(e,t,a){e.exports=a(145)},75:function(e,t,a){}},[[70,1,2]]]);
//# sourceMappingURL=main.a8764516.chunk.js.map