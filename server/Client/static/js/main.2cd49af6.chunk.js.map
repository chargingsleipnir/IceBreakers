{"version":3,"sources":["images/Punch_02_32x32.png","images/Tackle_01_32x32.png","images/Kick_02_32x32.png","components/Join.js","Consts.js","components/Lobby/UserIdent.js","components/Lobby/Users/User.js","components/Lobby/Users/Users.js","components/Lobby/Chat/UserInfoBar.js","components/Lobby/Chat/IceBreakers/Fight/Outcome.js","components/Lobby/Chat/IceBreakers/Trap/Outcome.js","components/Lobby/Chat/IceBreakers/Blank/Outcome.js","components/Lobby/Chat/Message.js","components/Lobby/Chat/PageTitleBar.js","components/Lobby/Chat/IceBreakers/Fight/Setup.js","components/Lobby/Chat/IceBreakers/Trap/Setup.js","components/Lobby/Chat/IceBreakers/Blank/template_SetupStatement.js","components/Lobby/Chat/IceBreakers/Blank/Setup.js","components/Lobby/Chat/IceBreakerSelection.js","components/Lobby/Chat/IceBreakers/Fight/Engage.js","components/Lobby/Chat/IceBreakers/Trap/Engage.js","components/Lobby/Chat/IceBreakers/Blank/Engage.js","components/Lobby/Chat/Chat.js","components/PageSelection.js","components/LoadBar.js","components/ImgUpload.js","App.js","index.js","images/SpeechlessGuy.png"],"names":["module","exports","socket","pages","msgTypes","iceBreakers","fightRoundActions","fightWinner","fightOutcome","fightSteps","trapSteps","blankSteps","UserIdent","name","online","imgSrc","imgIsPortrait","className","src","defaultImg","alt","User","user","LikeUserToggle","ToPageChat","html_likeBtnVisual","likeThem","mutual","likesMe","html_SpeechBtnVisual","html_UnreadMsgNotif","unreadMsg","classes","chatEvent","isPortrait","onClick","id","disabled","Users","users","scrollViewClassName","map","i","key","UserInfoBar","ToPageUsers","user_Chat","user_Chat_Active","IBFightOutcome","roundWinner","message","fromSelf","data","chatPtnrName","GetImage","action","Consts","imgPunch","imgTackle","imgKick","step","msg","msgOriginRef","ReactEmoji","emojify","msgProvoke","result","resultHighlightClass","resultMsg","msgEnd","IBTrapOutcome","GetGiftCanvas","canGift","giftCanvas","hideGrid","canvasWidth","canvasHeight","saveData","giftCanvasSaveData","hideInterface","giftText","launchTrap","trapSuccess","IBBlankOutcome","blankFilledArr","blankGuessedArr","revealAllAtOnce","statements","length","push","preBlank","asBlank","postBlank","blankGuess","guessMatch","matchCount","statementCount","Message","type","PageTitleBar","BackFunc","title","subtitle","IBFightSetup","ReturnToSelection","LaunchChatEvent","elem_Form","React","createRef","elem_ProvokeMsg","elem_WinMsg","elem_LoseMsg","elem_TieMsg","rounds","radioName","htmlFor","value","defaultChecked","role","ref","form","placeholder","event","preventDefault","actionsSent","btns","elements","j","checked","parseInt","current","msgWin","msgLose","msgTie","setTimeout","actionsResp","IBTrapSetup","useState","sliderPct","SetSliderPct","colour","SetColour","brushRadius","SetBrushRadius","canvasRef","useRef","elem_GiftText","elem_SuccessMsg","elem_FailMsg","lazyRadius","brushColor","isNaN","color","onChangeComplete","newColour","hex","undo","clear","onChange","e","target","min","max","getSaveData","msgSuccess","msgFail","TemplateSetupStatement","IBBlankSetup","SetStatementCount","elem_RevealAllCheckbox","html_setupStatements","statement","checkbox","lis","getElementsByClassName","elemPreBlank","elemAsBlank","elemPostBlank","IceBreakerSelection","props","state","iceBreaker","bind","this","setState","ReturnToChat","Component","IBFightEngage","eventData","SendMessage","UpdateEventData","ClearEvent","AssessRoundWinner","actionOfSender","actionOfReponder","OnAct","fightAction","actionSent","actionResp","senderWins","responderWins","IBTrapEngage","randNum","Math","floor","random","btnPresses","IBBlankEngage","elem_fillInput","jsxArr","blankIndex","size","input","inputElems","document","toLowerCase","trim","OnFill","Chat","msgText","preppingChatEvent","SendText","ChooseIceBreaker","console","log","warn","dataObj","asEvent","PreppingCE","disableSend","disableCE","isPreppingCE","chatEventDisp","evt","messages","onKeyPress","PageSelection","page","on","userID","removeIndex","findIndex","splice","userData","socketID","changeIndex","emit","prevState","chatPtnrID","recObj","msgData","moddedMsgObj","isEvent","updatedData","isLiked","elem","LoadBar","percent","barStyle","width","style","aria-valuenow","aria-valuemin","aria-valuemax","URL","window","webkitURL","extArr","ImgUpload","GetImgDetails","orientation","willLoadFile","html_LoadBar","imgTag","accept","capture","files","fname","ext","slice","lastIndexOf","indexOf","file","img","Image","onload","height","createObjectURL","alert","getElementById","click","io","Join","signedIn","nameField","fileExt","fileSrc","fileReader","resObj","place","currentSlice","readAsArrayBuffer","error","abort","readAsDataURL","SubmitProfile","FileReader","blur","App","path","exact","component","ReactDOM","render","querySelector"],"mappings":"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","file":"static/js/main.2cd49af6.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAC33pUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHja7ZdBkuQoDEX3nGKOgCSExHGwgYi+wRx/PphyVmZVd8T09GIWacIGy+IL9GRnVeh//xjhLxxUJIak5rnkHHGkkgpXDDxex9VTTOu6Dt6PcP9kD/cDhknQy3Wb+/avsOtjgqVtP57twc6t41toP/gQlBl5Rtt+voWELzvt+1D2vJo+bWefR9s2vbrX+2RIRlPoCQfuQhJxzTOKXGfFqbiSJDiR2Bo7rjz9vstduIcvybtHL7mLddvlORUh5u2QX3K07aTf525l6POK6BH56YHJHeJL7sZoPka/dldTRqZy2Jv62MoawfFAKmVNy2iGUzG21QqaY4sniDXQPNDOQIUY2R6UqFGlQX31J51YYuLOhp75ZFk2F+PCp0wEaTYabFKkBbBgOUFNYOZ7LbTilhXvJEfkRvBkghhhxpcWvjP+TruFxpilSxT9zhXWxbOmsYxJbl7hBSA0dk515Xe18Klu4iewAoK60uzYYI3HJXEoPWpLFmeBn8YU4vVqkLUtgBQhtmIxJCAQM4lSpmjMRoQ8OvhUrJxR9gcIkCo3CgNsRDLgOM/YmGO0fFn5MuPTAhAqGa+Kg1AFrJQU9WPJUUNVRVNQ1aymrkVrlpyy5pwtz29UNbFkatnM3IpVF0+unt3cvXgtXASfMC25WCheSqkVQSukK2ZXeNR68CFHOvTIhx1+lKOeKJ8znXrm004/y1kbN2l4/VtuFpq30mqnjlLqqWvP3br30utArQ0ZaejIw4aPMupNbVN9pkYv5H5NjTa1SSwtP3tQg9nsQ4Lm50QnMxDjRCBukwAKmiez6JQST3KTWSyMl0IZ1EgnnEaTGAimTqyDbnYPcr/kFjT9K278M3JhovsT5MJEt8l95fYNtVbXL4osQPMtnDmNMvBhg0P3yl7nb9Jv9+G/CryF3kJvobfQW+gt9Bb6/wgN/PGAfzXDP+WRkYgEmS+0AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfkBQ4VEhuBQtPTAAABqklEQVRIx52UTShEURTHf8akzEIWSjEbSVGUQqmRhRKlFCEbzWKUrY+djWKDDaXUyEYNpSwosaJZzNJHRFmw8VEWs5mZfH9cC8fzZrzx3n3/uzjv/u89/3vOueddsEMec6RIMIMHV5hEyRh3J3BiCBxaLduH9WR8PbqLoN+IoAeX6GSLTTqsF3NNyTThI26xx0clBwwRIGZKSJAj1kuUABDjyCQK8EGIDYIArNOfLcxWI1OrsST2mDB+61uI2zTT9w0U4SdinQJMMUacea4zUnhnmXymmQAe2KHX5JMmkB27tJNigVLeGCBBse41zqJQXBFFoZjR74NBKeEiinsK9QXaROCWJRrcdGKd6UJr9X8m+LTsXA0B9d+ix1ERf1GvX4GRtKa+1H3YangW13OxQT2BqLhNUcYbCsWFjntA3GMALMusz7lARFy+S1fBZ/bH1QpekqbzAdZEsMWZQLNsHzaYWmG2nQmMyvZqE7cnXLmTRqqSRj4zcQtiQ04i2EehOM1g71Ao7pxEUADASwa7AkAJAXsBj5yYjlWxr/YpDJDkhsY/fBdhun8mX1m4re0W+oxcAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAC3XpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHja7ZdBkuQoDEX3nGKOgCSExHGwgYi+wRx/PphyVmZVd8T09GIWacIGy/IX6AlnVeh//xjhLxxUJIak5rnkHHGkkgpXDDxex9VTTOu6Dt6PcP9kD/cDhknQy3Wb+/avsOvjBUvbfjzbg51bx7fQfvAhKDPyjLb9fAsJX3ba96Hs92r6tJx9Hm3b9Ope75MhGU2hJxy4C0nENc8ocp0Vp+JKkuBEYmt8Xfn73IV7+JK8e/SSu1i3XZ5TEWLeDvklR9tO+n3uVoY+z4gekZ8emNwhvuRujOZj9Gt1NWVkKoe9qI+lrBEcD6RS1msZzXAqxrZaQXMs8QSxBpoH2hmoECPbgxI1qjSor/6kE1NM3NnQM58sy+ZiXPiUiSDNRoNNirQgDk4nqAnMfM+FVtyy4p3kiNwInkwQA7mvLXxn/J12C40xS5co+p0rzItn1WAak9y8wgtAaOyc6srvauFT3cRPYAUEdaXZscAaj0viUHrUlizOAj+NKcRra5C1LYAUIbZiMiQgEDOJUqZozEaEPDr4VMycUfYHCJAqNwoDbEQy4DjP2HjHaPmy8mXGpwUgVDI2iYNQBayUFPVjyVFDVUVTUNWspq5Fa5acsuacLc9vVDWxZGrZzNyKVRdPrp7d3L14LVwEnzAtuVgoXkqpFUErpCvervCo9eBDjnTokQ87/ChHPVE+Zzr1zKedfpazNm7SsP1bbhaat9Jqp45S6qlrz92699LrQK0NGWnoyMOGjzLqTW1TfaZGL+R+TY02tUksLT97UIPZ7EOC5udEJzMQ40QgbpMACpons+iUEk9yk1ksjE2hDGqkE06jSQwEUyfWQTe7B7lfcgua/hU3/hm5MNH9CXJhotvkvnL7hlqr6xdFFqC5C2dOowx82ODQvbLX+Zv02334rwJvobfQW+gt9BZ6C72F/j9CA3884F/N8A+Ry5GC1Ba05AAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH5AUOFRENXrs1QQAAAcFJREFUSMellcsrRUEcxz/I48pjgVKSSN0k5S7svEpecUlZKRYWNlKytCDPhT/AQlZISSnZCHksLMRGoUgeG6+8blyhOBZ3TOece48z9/jN4sz8zny+c+b85vebKIItkQJi8OHQmvGhoTFJpBM8nTc00bpUAPMqNbhkv96JwKNF39IiTONY9nED8E0p2yTgpYICovCxwwJ79pIZTHHABtXEM8iz/COBtkqu6u8s49AEB9or1fZwEnMh4UD7oPJvvIgLA3BKPJBKJ0/C80K2Nd6AP2jNFvEuS0qPWeFVfIb46HPixPs8IV8bGs8Ux1hjwrSNHjknlw4KrdafFdNvaKbbIPBAskro9nSI37SZURUBL/c6ZNMU/1QViWgameEWDT8eFg0S4+GktZsUIN8UjcLw68OWQWA7PNjDbtCJaFOFIxjgSwe+i+cVCSp4Mms6+JhO0mRujqkIrEj4jnbhq5Df4rYXuJIC67oCMi98y/YCrboNvDEkCm2WrNhee4k6Tg3ZWAxAn6wQLnsJF/26O+JS+M7EuFctmDksCeBEeJpkqmWqnoh6jrimPChC007vzjyR5tc4thE0NIb5h5Xg+e3+AJ5bIiPN9MLVAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAC3npUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHja7ZdBkuQoDEX3nGKOgCSExHGwgYi+wRx/PphyVmZVd8T09GIWacIGy+IL9ICsCv3vHyP8hYuKxJDUPJecI65UUuGKhsfrumqKaT3XxfsT3p/s4f7AMAlquV5z3/4Vdn10sLTtx7M92Ll1fAvtDx+CMiPPaNvPt5DwZaf9HsruV9On6ez7aNumV/X6ngzJaAo94cBdSCKeeUaR6664FU+SBCcSW+2y7On73IW7+ZK8u/WSu1i3XZ5TEWLeDvklR9tO+n3uVoY+j4gekZ8+mNwhvuRujOZj9Gt2NWVkKoc9qY+prBYcD6RSVreMYrgVbVuloDimeIJYA80D5QxUiJHtQYkaVRrUV33SiSEm7myomU+WZXMxLnzKRJBmocEGDC2Ig9MJagIz32OhFbeseCc5IjeCJxPECD2+lPCd8XfKLTTGXLpE0e9cYVw81zSGMcnNJ7wAhMbOqa78rhI+rZv4CayAoK40OyZY43FJHEqPtSWLs8BPYwrx2hpkbQsgRYitGAwJCMRMopQpGrMRIY8OPhUjZyz7AwRIlRuFATYiGXCcZ2z0MVq+rHyZcbQAhErGVvG5UQArJcX6seRYQ1VFU1DVrKauRWuWnLLmnC3PM6qaWDK1bGZuxaqLJ1fPbu5evBYugiNMSy4WipdSakXQCumK3hUetR58yJEOPfJhhx/lqCeWz5lOPfNpp5/lrI2bNGz/lpuF5q202qljKfXUtedu3XvpdWCtDRlp6MjDho8y6k1tU32mRi/kfk2NNrVJLC0/e1CD2exDguZxopMZiHEiELdJAAuaJ7PolBJPcpNZLIxNoQxqpBNOo0kMBFMn1kE3uwe5X3ILmv4VN/4ZuTDR/QlyYaLb5L5y+4Zaq+sXRRaguQtnTqMMHGxw6F7Z6/xN+u06/FeBt9Bb6C30FnoLvYXeQv8foYE/HvCvZvgHu7SRhcbx1mEAAAACYktHRAD/h4/MvwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB+QFDhUTBvtfjksAAAGPSURBVEjHvZXNK0RRGIefGcr4SDKJLGQWJEqyIqws1SQKUxILVqaZyPwBFrNRKDYiWxtkJUVRFjayNomNhjEzZTUW0hyLe7ruzLl3rrkT71m95/e7zz3nPV9QYpThYhwfD84RewgEW84BQrY1p4BDHbFi6fHip85KrOJKRyyYOmp5RvBIpTXiWgKy+E30XqkuWk+jhltpytCnqC5iCASv1mOAJp4k4oUWRZ2RWlBHTrBBiHqjqZWEtN1RpSDuEQgSVAIeLqUzTpvR1M+HFA4UwLRUQkBQL7rg1JVjm9I/DXOOJ0c7owFI4mOfSb03m/+nqIFu3sLsGrKkWvELG0CKYUO2qq5HI3EbxBIBUgg+WafMbElHbQBveIAuqq32RI9tHeYLHy97QOzHXF4AdExUOfpDbALtjHNkP4IdRemkmzQCwc1vppAPWJYnVlMHtE53EVfPmNwpWkSKB2zzZcj8NBULOKCZWU7IAJDmvfgialHBCBE6nKyCSbhLfZn+BCBKfy+1CzbgHOFljkH+J74ByqfzaSxfi4YAAAAASUVORK5CYII=\"","import React, { Component } from 'react';\r\nimport io from 'socket.io-client';\r\nimport * as Consts from '../Consts';\r\n\r\nimport PageSelection from './PageSelection';\r\nimport ImgUpload from './ImgUpload';\r\n\r\nimport defaultImg from '../images/SpeechlessGuy.png';\r\n\r\nlet socket;\r\n\r\n// TAG (build): Remove \"Consts.ENDPOINT\" on build/deployment\r\nsocket = io();\r\n\r\nclass Join extends Component {\r\n\r\n    state = {\r\n        file: null,\r\n        percent: 0,\r\n        disabled: false,\r\n        signedIn: false\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.nameField = React.createRef();\r\n        this.fileExt = '';\r\n        this.fileSrc = defaultImg;\r\n        this.orientation = 1;\r\n        this.isPortrait = false;\r\n\r\n        this.slice = null;\r\n        this.fileReader = null;\r\n\r\n        socket.on('ImageReqSlice', (resObj) => {\r\n            let place = resObj.currentSlice * Consts.SLICE_SIZE;\r\n            this.slice = this.state.file.slice(place, place + Math.min(Consts.SLICE_SIZE, this.state.file.size - place)); \r\n\r\n            const percent = (place / this.state.file.size) * 100;\r\n            this.setState({ percent });\r\n\r\n            this.fileReader.readAsArrayBuffer(this.slice);\r\n        });\r\n\r\n        // TODO: Make sure file reader is shut down as soon as error hits!\r\n\r\n        socket.on('ImageUploadError', (error) => {\r\n            console.log('Could not upload image due to error: ', error);\r\n            this.fileReader.abort();\r\n            alert(\"Error uploading image, restoring default, my bad. :(\");\r\n            this.fileExt = '';\r\n            this.fileSrc = defaultImg;\r\n            this.isPortrait = false;\r\n            this.orientation = 1;\r\n            this.setState({\r\n                file: null,\r\n                disabled: false,\r\n                percent: 0\r\n            });\r\n        });\r\n        socket.on('ImageUploadEnd', (resObj) => {\r\n            this.fileReader.onload = (evt) => {\r\n                console.log('Image upload successful');\r\n                this.setState({\r\n                    file: null,\r\n                    percent: 100\r\n                });\r\n\r\n                socket.emit('AddUser', { \r\n                    name: this.nameField.current.value, \r\n                    ext: this.fileExt, \r\n                    orientation: this.orientation, \r\n                    isPortrait: this.isPortrait \r\n                }, () => {\r\n                    this.setState({ signedIn: true });\r\n                });\r\n            };\r\n            this.fileReader.readAsDataURL(this.state.file);\r\n        });\r\n\r\n        this.SubmitProfile = this.SubmitProfile.bind(this);\r\n        this.GetImgDetails = this.GetImgDetails.bind(this);\r\n    }\r\n\r\n\r\n    SubmitProfile (event) {\r\n        event.preventDefault();\r\n        const name = this.nameField.current.value;\r\n        \r\n        if(name === '') {\r\n            alert(\"Name required\");\r\n            return;\r\n        }\r\n\r\n        this.setState({ disabled: true });\r\n\r\n        console.log(`Submit clicked - Name: ${name}, Ext: ${this.fileExt}, src: ${this.fileSrc}, orientation: ${this.orientation}, isPortrait: ${this.isPortrait}, file:`, this.state.file);\r\n\r\n\r\n        if(this.state.file === null) {\r\n            socket.emit('AddUser', { \r\n                name, \r\n                ext: this.fileExt, \r\n                orientation: this.orientation, \r\n                isPortrait: this.isPortrait \r\n            }, () => {\r\n                this.setState({ signedIn: true });\r\n            });\r\n        }\r\n        else {\r\n            // Start image upload, adding user officially at the end.\r\n            this.slice = this.state.file.slice(0, Consts.SLICE_SIZE);\r\n            this.fileReader = new FileReader();\r\n            this.fileReader.onload = (event) => {\r\n                socket.emit('ImageUploadSlice', { ext: this.fileExt, name, type: this.state.file.type, size: this.state.file.size, data: event.target.result });\r\n            };\r\n            this.fileReader.readAsArrayBuffer(this.slice);\r\n        }\r\n    };\r\n\r\n    GetImgDetails (ext, file, src, orientation, isPortrait) {\r\n        console.log(`Ext: ${ext}, src: ${src}, orientation: ${orientation}, isPortrait: ${isPortrait}, file:`, file);\r\n        this.fileExt = ext;\r\n        this.fileSrc = src;\r\n        this.orientation = orientation;\r\n        this.isPortrait = isPortrait;\r\n        this.setState({ file });\r\n    };\r\n\r\n    //console.log(`Main body called in Join.js`);\r\n\r\n    render() {\r\n\r\n        // The elements on this page have been disabled, implies that the submit button was hit.\r\n        const willLoadFile = this.state.disabled && this.state.file !== null;\r\n\r\n        return (\r\n            this.state.signedIn ? (\r\n                <PageSelection socket={socket} />\r\n            ) : (\r\n                <div className=\"position-relative h-100\">\r\n                    <div className=\"container-fluid h-100 d-flex flex-column justify-content-center align-items-center\">\r\n                        <div>\r\n                            <div className=\"head1 text-center text-white\">Welcome</div>\r\n                            <hr className=\"bg-light mt-1 mb-2 mt-md-2 mb-md-3 mt-lg-3 mb-lg-4\" />\r\n                            <input type=\"text\" className=\"form-control form-control-lg\" placeholder=\"Name\" ref={this.nameField} onKeyPress={event => event.key === \"Enter\" ? event.target.blur() : null} disabled={this.state.disabled} />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <ImgUpload GetImgDetails={this.GetImgDetails} imgSrc={this.fileSrc} orientation={this.orientation} isPortrait={this.isPortrait} disabled={this.state.disabled} willLoadFile={willLoadFile} percent={this.state.percent} />\r\n                            <button className=\"btn btn-primary btn-lg btn-block mt-2\" onClick={this.SubmitProfile} disabled={this.state.disabled}>Sign In</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        );\r\n    }\r\n};\r\n\r\nexport default Join;","export const ENDPOINT = 'localhost:5000';\r\nexport const SLICE_SIZE = 100000;\r\nexport const pages = { USERS: 0, CHAT: 1 };\r\nexport const msgTypes = { TEXT: 0, CE_FIGHT: 1, CE_TRAP: 2, CE_BLANK: 3 };\r\n\r\nexport const iceBreakers = { NONE: 0, FIGHT: 1, TRAP: 2, BLANK: 3 };\r\nexport const CE_MSG_DELAY = 750;\r\n\r\nexport const FIGHT_MAX_ROUNDS = 5;\r\nexport const fightRoundActions = { PUNCH: 0, TACKLE: 1, KICK: 2 };\r\nexport const fightWinner = { SENDER: 0, RESPONDER: 1, TIE: 2 };\r\nexport const fightOutcome = { WIN: 1, LOSE: -1, TIE: 0 };\r\nexport const fightSteps = { INIT: 0, ACCEPT: 1, CANCEL: 2, ACT: 3, END: 4 };\r\n\r\nexport const TRAP_STRUGGLE_TIME = 3000;\r\nexport const TRAP_STRUGGLE_COUNT = 15;\r\nexport const trapSteps = { INIT: 0, ACCEPT: 1, REJECT: 2, STRUGGLE: 3, END: 4 };\r\n\r\nexport const blankSteps = { INIT: 0, ACCEPT: 1, REJECT: 2, FILL: 3, END: 4 };\r\n\r\nexport const GetOrientation = (file, callback) => {\r\n    var reader = new FileReader();\r\n    reader.onload = function(e) {\r\n\r\n        var view = new DataView(e.target.result);\r\n        if (view.getUint16(0, false) !== 0xFFD8)\r\n        {\r\n            return callback(-2);\r\n        }\r\n        var length = view.byteLength, offset = 2;\r\n        while (offset < length) \r\n        {\r\n            if (view.getUint16(offset+2, false) <= 8) return callback(-1);\r\n            var marker = view.getUint16(offset, false);\r\n            offset += 2;\r\n            if (marker === 0xFFE1) \r\n            {\r\n                if (view.getUint32(offset += 2, false) !== 0x45786966) \r\n                {\r\n                    return callback(-1);\r\n                }\r\n\r\n                var little = view.getUint16(offset += 6, false) === 0x4949;\r\n                offset += view.getUint32(offset + 4, little);\r\n                var tags = view.getUint16(offset, little);\r\n                offset += 2;\r\n                for (var i = 0; i < tags; i++)\r\n                {\r\n                    if (view.getUint16(offset + (i * 12), little) === 0x0112)\r\n                    {\r\n                        return callback(view.getUint16(offset + (i * 12) + 8, little));\r\n                    }\r\n                }\r\n            }\r\n            else if ((marker & 0xFF00) !== 0xFF00)\r\n            {\r\n                break;\r\n            }\r\n            else\r\n            { \r\n                offset += view.getUint16(offset, false);\r\n            }\r\n        }\r\n        return callback(-1);\r\n    };\r\n    reader.readAsArrayBuffer(file);\r\n};\r\n\r\nexport const ResetOrientation = (srcBase64, srcOrientation, callback) => {\r\n    var img = new Image();\r\n    \r\n    img.onload = function() {\r\n        var width = img.width,\r\n            height = img.height,\r\n            canvas = document.createElement('canvas'),\r\n            ctx = canvas.getContext(\"2d\");\r\n    \r\n        // set proper canvas dimensions before transform & export\r\n        if (4 < srcOrientation && srcOrientation < 9) {\r\n            canvas.width = height;\r\n            canvas.height = width;\r\n        } else {\r\n            canvas.width = width;\r\n            canvas.height = height;\r\n        }\r\n    \r\n        // transform context before drawing image\r\n        switch (srcOrientation) {\r\n            case 2: ctx.transform(-1, 0, 0, 1, width, 0); break;\r\n            case 3: ctx.transform(-1, 0, 0, -1, width, height); break;\r\n            case 4: ctx.transform(1, 0, 0, -1, 0, height); break;\r\n            case 5: ctx.transform(0, 1, 1, 0, 0, 0); break;\r\n            case 6: ctx.transform(0, 1, -1, 0, height, 0); break;\r\n            case 7: ctx.transform(0, -1, -1, 0, height, width); break;\r\n            case 8: ctx.transform(0, -1, 1, 0, 0, width); break;\r\n            default: break;\r\n        }\r\n    \r\n        // draw image\r\n        ctx.drawImage(img, 0, 0);\r\n    \r\n        // export base64\r\n        callback(canvas.toDataURL());\r\n    };\r\n\r\n    img.src = srcBase64;\r\n};","import React from 'react';\r\nimport defaultImg from '../../images/SpeechlessGuy.png';\r\n\r\nconst UserIdent = ({ name, online, imgSrc, imgIsPortrait }) => (\r\n    <div className=\"d-flex flex-wrap align-items-center\">\r\n        <div className=\"avatarsUserIdent rounded-circle\">\r\n            <img src={imgSrc || defaultImg} alt=\"User Avatar\" className={imgIsPortrait ? \"portrait\" : \"\"} />\r\n        </div>\r\n        <div className=\"ml-3\">\r\n            <div>{name}</div>\r\n            <small>{online ? \"\" : \" [offline]\"}</small>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport default UserIdent;","import React from 'react';\r\nimport UserIdent from '../UserIdent';\r\n\r\nconst User = ({user, LikeUserToggle, ToPageChat}) => {\r\n\r\n    let html_likeBtnVisual = user.likeThem ? <i className=\"fas fa-heart fa-lg\"></i> : <i className=\"far fa-heart fa-lg\"></i>;\r\n\r\n    const mutual = user.likeThem && user.likesMe;\r\n    const html_SpeechBtnVisual = mutual ? <i className=\"fas fa-comment fa-lg fa-fw\"></i> : <i className=\"fas fa-comment-slash fa-lg fa-fw\"></i>;\r\n\r\n    var html_UnreadMsgNotif = \"\";\r\n    if(user.unreadMsg) {\r\n        // Set different coloured notification if the last message is an event\r\n        let classes = \"notificationBadge\"\r\n        if(user.chatEvent !== null)\r\n            classes += \" isEvent\"\r\n\r\n        html_UnreadMsgNotif = <span className={classes}></span>\r\n    }\r\n\r\n    return (\r\n        <div className=\"d-flex flex-wrap justify-content-between align-items-center\">\r\n            <UserIdent name={user.name} online={true} imgSrc={user.imgSrc} imgIsPortrait={user.isPortrait} />\r\n            <div className=\"d-flex align-items-center\">\r\n                <button className=\"btn pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-3 pr-md-3\" onClick={() => { LikeUserToggle(user.id, !user.likeThem); }}>\r\n                    { html_likeBtnVisual }\r\n                </button>\r\n                <button className=\"btn pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-3 pr-md-3 position-relative\" onClick={() => { ToPageChat(user); }} disabled={!mutual} >\r\n                    { html_SpeechBtnVisual }\r\n                    { html_UnreadMsgNotif }\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default User;","import React from 'react';\r\nimport User from './User';\r\nimport ScrollToBottom from 'react-scroll-to-bottom';\r\n\r\nconst Users = ({ users, LikeUserToggle, ToPageChat }) => (\r\n    <div className=\"h-100 w-100 d-flex flex-column\">\r\n        <div className=\"head1 text-center text-white\">Users</div>\r\n        <ul className=\"list-group bg-secondary p-2 flex-grow-1 position-relative\">\r\n            <ScrollToBottom className=\"FullSpreadAbsElem\" scrollViewClassName=\"pad10\">\r\n                { \r\n                    users.map((user, i) => \r\n                        <li className=\"list-group-item m-0Auto maxW1000 innerScrollItem\" key={i} >\r\n                            <User user={user} LikeUserToggle={LikeUserToggle} ToPageChat={ToPageChat} />\r\n                        </li>\r\n                    )\r\n                }\r\n            </ScrollToBottom>\r\n        </ul>\r\n    </div>\r\n);\r\n\r\nexport default Users;","import React from 'react';\r\nimport UserIdent from '../UserIdent';\r\n\r\nconst UserInfoBar = ({ ToPageUsers, user_Chat, user_Chat_Active }) => (\r\n    <div>\r\n        <div className=\"maxW1000 m-0Auto\">\r\n            <div className=\"text-white d-flex align-items-center pt-3 pb-3\">\r\n                <button onClick={ToPageUsers} className=\"btn ml-2 text-white\">\r\n                    <i className=\"fas fa-arrow-left fa-lg\"></i>\r\n                </button>\r\n                <div className=\"ml-2 fontSize150\"><UserIdent name={user_Chat.name} online={user_Chat_Active} imgSrc={user_Chat.imgSrc} imgIsPortrait={user_Chat.isPortrait} /></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport default UserInfoBar;","import React from 'react';\r\nimport ReactEmoji from 'react-emoji';\r\nimport * as Consts from '../../../../../Consts';\r\n\r\nimport imgPunch from '../../../../../images/Punch_02_32x32.png';\r\nimport imgTackle from '../../../../../images/Tackle_01_32x32.png';\r\nimport imgKick from '../../../../../images/Kick_02_32x32.png';\r\n\r\nconst IBFightOutcome = ({ message: { fromSelf, data}, chatPtnrName }) => {\r\n\r\n    const GetImage = (action) => {\r\n        if(action === Consts.fightRoundActions.PUNCH)\r\n            return imgPunch;\r\n        else if(action === Consts.fightRoundActions.TACKLE)\r\n            return imgTackle;\r\n        else if(action === Consts.fightRoundActions.KICK)\r\n            return imgKick;\r\n    }\r\n\r\n    const GetRoundResult = (roundWinner) => {\r\n        if(roundWinner === Consts.fightWinner.SENDER)\r\n            return fromSelf ? Consts.fightOutcome.LOSE : Consts.fightOutcome.WIN;\r\n        else if(roundWinner === Consts.fightWinner.RESPONDER)\r\n            return fromSelf ? Consts.fightOutcome.WIN : Consts.fightOutcome.LOSE;\r\n        else if(roundWinner === Consts.fightWinner.TIE)\r\n            return Consts.fightOutcome.TIE;\r\n    }\r\n\r\n    // \"Self\" - the person who sent these messages, is the fight responder\r\n    const GetFightResultMessage = (fightWinner) => {\r\n        if(fightWinner === Consts.fightWinner.SENDER)\r\n            return fromSelf ? `${chatPtnrName} won!` : `You beat ${chatPtnrName}!`;\r\n        else if(fightWinner === Consts.fightWinner.RESPONDER)\r\n            return fromSelf ? `You beat ${chatPtnrName}!` : `${chatPtnrName} won!`;\r\n        else if(fightWinner === Consts.fightWinner.TIE)\r\n            return \"We have a tie!\";\r\n    }\r\n\r\n    if(data.step === Consts.fightSteps.INIT) {\r\n\r\n        let msg = ``;\r\n        let msgOriginRef = ``;\r\n\r\n        if(fromSelf) {\r\n            msg = `You challenged ${chatPtnrName} to a fight!`;\r\n            msgOriginRef = `fromAdminOfSelf`;\r\n        }\r\n        else {\r\n            msg = `${chatPtnrName} challenged you to a fight!`;\r\n            msgOriginRef = `fromAdminOfOther`;\r\n        }\r\n\r\n        return (\r\n            <div className=\"d-flex justify-content-center mt-2\">\r\n                <div className=\"outerBox text-center\">\r\n                    <div className=\"messageText fontSize90 text-white\">{msg}</div>\r\n                    <div className={`messageBox messageText mt-2 ${msgOriginRef}`}>{ReactEmoji.emojify(data.msgProvoke)}</div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    else if(data.step === Consts.fightSteps.ACCEPT) {\r\n        return (\r\n            <div className=\"d-flex justify-content-center mt-2\">\r\n                <div className=\"text-center fontSize90\">\r\n                    <div className=\"messageText text-white\">Challenge accepted!</div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    else if(data.step === Consts.fightSteps.CANCEL) {\r\n\r\n        const msg = fromSelf ? `You wimped out.` : `${chatPtnrName} wimped out.`;\r\n        return (\r\n            <div className=\"d-flex justify-content-center mt-2 mb-3\">\r\n                <div className=\"text-center fontSize90\">\r\n                    <div className=\"messageText text-white\">{ReactEmoji.emojify(msg)}</div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    // roundWinner\r\n    // actionSent\r\n    // actionResp\r\n    else if(data.step === Consts.fightSteps.ACT) {\r\n\r\n        const result = GetRoundResult(data.roundWinner);\r\n        let resultHighlightClass = \"\";\r\n        let resultMsg = \"Oof...\";\r\n        if(result === Consts.fightOutcome.WIN) {\r\n            resultHighlightClass = \"textShadowGreen\";\r\n            resultMsg = \"Nice!\";\r\n        }\r\n        else if(result === Consts.fightOutcome.LOSE) {\r\n            resultHighlightClass = \"textShadowRed\";\r\n            resultMsg = \"Ouch!\";\r\n        }\r\n\r\n        return (\r\n            <div className=\"d-flex justify-content-center mt-2\">\r\n                <div className=\"width80Pct\">\r\n                    <div className=\"d-flex justify-content-between align-items-center mt-1\">\r\n                        {/* In this case, \"self\", the person who sent the message, is the action Responder */}\r\n                        <div className=\"bg-warning mr-3\">\r\n                            <img src={GetImage(data[fromSelf ? \"actionSent\" : \"actionResp\"])} alt=\"action\" className=\"m-1\" />\r\n                        </div>\r\n                        <div className={`mr-3 font-weight-bold text-white ${resultHighlightClass}`}>\r\n                            {resultMsg}\r\n                        </div>\r\n                        <div className=\"bg-warning\">\r\n                            <img src={GetImage(data[fromSelf ? \"actionResp\" : \"actionSent\"])} alt=\"action\" className=\"m-1\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    // fightWinner\r\n    // msgEnd will be either: msgWin or msgLose or msgTie, as setup by sender\r\n    else if(data.step === Consts.fightSteps.END) {\r\n\r\n        // The user responding to the fighting initaited this message to be sent, but it was the other user who msgEnd belongs to, hence the reverse classes being used.\r\n        let msgOriginRef = ``;\r\n        if(fromSelf) {\r\n            msgOriginRef = `fromAdminOfOther`;\r\n        }\r\n        else {\r\n            msgOriginRef = `fromAdminOfSelf`;\r\n        }\r\n\r\n        return (\r\n            <div className=\"d-flex justify-content-center mt-2 mb-3\">\r\n                <div className=\"outerBox text-center\">\r\n                    <div className=\"messageText text-white fontSize90\">{GetFightResultMessage(data.fightWinner)}</div>\r\n                    <div className={`messageText messageBox mt-2 ${msgOriginRef}`}>{ReactEmoji.emojify(data.msgEnd)}</div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    else return \"\";\r\n};\r\n\r\nexport default IBFightOutcome;","import React from 'react';\r\nimport ReactEmoji from 'react-emoji';\r\nimport CanvasDraw from 'react-canvas-draw';\r\nimport * as Consts from '../../../../../Consts';\r\n\r\nconst IBTrapOutcome = ({ message: { fromSelf, data}, chatPtnrName }) => {\r\n\r\n    // \"Self\" - the person who sent these messages, is the potentially trapped.\r\n    const GetTrapResultMessage = (trapSuccess) => {\r\n        if(trapSuccess)\r\n            return fromSelf ? `You got caught in ${chatPtnrName}'s trap!` : `You caught ${chatPtnrName} in your trap!`;\r\n        else\r\n            return fromSelf ? `You broke free from ${chatPtnrName}'s trap!` : `${chatPtnrName} broke out of your trap!`;\r\n    }\r\n\r\n    const GetGiftCanvas = (canGift) => {\r\n        let giftCanvas = \"\";\r\n        if(canGift) {\r\n            giftCanvas = (\r\n                <div className=\"d-flex justify-content-center mt-2\">\r\n                    <div className=\"position-relative drawCanvasCont\">\r\n                        <CanvasDraw\r\n                            disabled\r\n                            hideGrid\r\n                            canvasWidth=\"250px\" \r\n                            canvasHeight=\"250px\" \r\n                            saveData={data.giftCanvasSaveData}\r\n                            hideInterface=\"true\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return giftCanvas;\r\n    }\r\n\r\n    if(data.step === Consts.trapSteps.INIT) {\r\n\r\n        const msg = fromSelf ? `You sent ${chatPtnrName} ${ReactEmoji.emojify(data.giftText)}.` : `${chatPtnrName} sent you ${ReactEmoji.emojify(data.giftText)}.`;\r\n        return (\r\n            <div className=\"d-flex justify-content-center mt-2\">\r\n                <div className=\"outerBox fontSize90 text-center\">\r\n                    <div className=\"messageText text-white\">{msg}</div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    else if(data.step === Consts.trapSteps.ACCEPT) {\r\n        return (\r\n            <div className=\"mb-3\">\r\n                <div className=\"d-flex justify-content-center mt-2\">\r\n                    <div className=\"outerBox fontSize90 text-center\">\r\n                        <div className=\"messageText text-white\">Gift accepted.</div>\r\n                    </div>\r\n                    \r\n                </div>\r\n                {GetGiftCanvas(!data.launchTrap)}\r\n            </div>\r\n        );\r\n    }\r\n    else if(data.step === Consts.trapSteps.REJECT) {\r\n\r\n        const msg = fromSelf ? `You turned it down.` : `It was turned away.`;\r\n        return (\r\n            <div className=\"d-flex justify-content-center mt-2 mb-3\">\r\n                <div className=\"outerBox fontSize90 text-center\">\r\n                    <div className=\"messageText text-white\">{msg}</div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    /*\r\n    trapSuccess: btnPresses >= Consts.TRAP_STRUGGLE_COUNT,\r\n    msgEnd\r\n    */\r\n\r\n    // TODO: The sender should be left with the option to send the image at the end, regardless of whether or not the trap succeeded, just to ensure that the time spent doesn't have to go to waste.\r\n    else if(data.step === Consts.trapSteps.END) {\r\n\r\n        let msgOriginRef = ``;\r\n        if(fromSelf) {\r\n            msgOriginRef = `fromAdminOfOther`;\r\n        }\r\n        else {\r\n            msgOriginRef = `fromAdminOfSelf`;\r\n        }\r\n\r\n        return (\r\n            <div className=\"mb-3\">\r\n                <div className=\"d-flex justify-content-center mt-2\">\r\n                    <div className=\"outerBox text-center\">\r\n                        <div className=\"messageText fontSize90 text-white\">{GetTrapResultMessage(data.trapSuccess)}</div>\r\n                        <div className={`messageText messageBox mt-2 ${msgOriginRef}`}>\"{ReactEmoji.emojify(data.msgEnd)}\"</div>\r\n                    </div>\r\n                </div>\r\n                {GetGiftCanvas(!data.trapSuccess)}\r\n            </div>\r\n        );\r\n    }\r\n    else return \"\";\r\n};\r\n\r\nexport default IBTrapOutcome;","import React from 'react';\r\nimport ReactEmoji from 'react-emoji';\r\nimport * as Consts from '../../../../../Consts';\r\n\r\nconst IBBlankOutcome = ({ message: { fromSelf, data}, chatPtnrName }) => {\r\n\r\n\r\n    if(data.step === Consts.blankSteps.INIT) {\r\n\r\n        const msg = fromSelf ? `You invited ${chatPtnrName} to read your mind!` : `${chatPtnrName} invited you to test your ESP!`;\r\n        return (\r\n            <div className=\"d-flex justify-content-center mt-2\">\r\n                <div className=\"outerBox text-center\">\r\n                    <div className=\"messageText fontSize90 text-white\">{msg}</div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    else if(data.step === Consts.blankSteps.ACCEPT) {\r\n\r\n        return (\r\n            <div className=\"d-flex justify-content-center mt-2\">\r\n                <div className=\"outerBox text-center\">\r\n                    <div className=\"messageText fontSize90 text-white\">Invitation accepted!</div>\r\n                </div>\r\n            </div>\r\n        );     \r\n    }\r\n    else if(data.step === Consts.blankSteps.REJECT) {\r\n\r\n        const msg = fromSelf ? `You're antenna's not working right now.` : `${chatPtnrName} isn't feeling too perceptive right now.`;\r\n        return (\r\n            <div className=\"d-flex justify-content-center mt-2 mb-3\">\r\n                <div className=\"outerBox text-center\">\r\n                    <div className=\"messageText fontSize90 text-white\">{ReactEmoji.emojify(msg)}</div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // data. preBlank, asBlank, postBlank, blankGuess\r\n    else if(data.step === Consts.blankSteps.FILL) {\r\n\r\n        var blankFilledArr = [];\r\n        var blankGuessedArr = [];\r\n\r\n        if(data.revealAllAtOnce) {\r\n            for(let i = 0; i < data.statements.length; i++) {\r\n                blankFilledArr.push( \r\n                    <span key={i}>\r\n                        <span>{ReactEmoji.emojify(data.statements[i].preBlank)}</span>\r\n                        <u className=\"text-danger\">{ReactEmoji.emojify(data.statements[i].asBlank)}</u>\r\n                        <span>{ReactEmoji.emojify(data.statements[i].postBlank)}</span>\r\n                        &nbsp;\r\n                    </span>\r\n                )\r\n\r\n                blankGuessedArr.push( \r\n                    <span key={i}>\r\n                        <span>{ReactEmoji.emojify(data.statements[i].preBlank)}</span>\r\n                        <u className=\"text-danger\">{ReactEmoji.emojify(data.statements[i].blankGuess)}</u>\r\n                        <span>{ReactEmoji.emojify(data.statements[i].postBlank)}</span>\r\n                        &nbsp;\r\n                    </span>\r\n                )\r\n            }\r\n        }\r\n        else {\r\n            blankFilledArr.push( \r\n                <span key=\"0\">\r\n                    <span>{ReactEmoji.emojify(data.preBlank)}</span>\r\n                    <u className=\"text-danger\">{ReactEmoji.emojify(data.asBlank)}</u>\r\n                    <span>{ReactEmoji.emojify(data.postBlank)}</span>\r\n                </span>\r\n            )\r\n            blankGuessedArr.push( \r\n                <span key=\"0\">\r\n                    <span>{ReactEmoji.emojify(data.preBlank)}</span>\r\n                    <u className=\"text-danger\">{ReactEmoji.emojify(data.blankGuess)}</u>\r\n                    <span>{ReactEmoji.emojify(data.postBlank)}</span>\r\n                    &nbsp;\r\n                </span>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <div className=\"d-flex justify-content-center mt-2\">\r\n                <div className=\"outerBox width80Pct\">\r\n                    <div className=\"small text-light\">{data.guessMatch ? \"Match!\" : \"No match\"}</div>\r\n                    <div className={`messageText messageBox text-center ${fromSelf ? \"fromAdminOfOther\" : \"fromAdminOfSelf\"} mt-1`}>\r\n                        {blankFilledArr}\r\n                    </div>\r\n                    <div className={`messageText messageBox text-center ${fromSelf ? \"fromAdminOfSelf\" : \"fromAdminOfOther\"} mt-1 mb-2`}>\r\n                        {blankGuessedArr}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // data. statementCount, matchCount\r\n    else if(data.step === Consts.blankSteps.END) {\r\n        return (\r\n            <div className=\"d-flex justify-content-center mt-2 mb-3\">\r\n                <div className=\"outerBox text-light text-center\">\r\n                    Matches: {data.matchCount} of {data.statementCount}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    else return \"\";\r\n};\r\n\r\nexport default IBBlankOutcome;","import React from 'react';\r\nimport ReactEmoji from 'react-emoji';\r\nimport * as Consts from '../../../Consts';\r\nimport IBFightOutcome from './IceBreakers/Fight/Outcome';\r\nimport IBTrapOutcome from './IceBreakers/Trap/Outcome';\r\nimport IBBlankOutcome from './IceBreakers/Blank/Outcome';\r\n\r\nconst Message = ({ message, chatPtnrName }) => {\r\n\r\n    if(message.type === Consts.msgTypes.TEXT) {\r\n        //console.log(`Message created. From self: ${fromSelf}, msg text: \"${data}\"`);\r\n        return (\r\n            message.fromSelf ? (\r\n                <div className=\"d-flex justify-content-end mt-2\">\r\n                    <div className=\"outerBox messageBox bgLightGreen fromSelf\">\r\n                        <div className=\"messageText\">{ReactEmoji.emojify(message.data)}</div>\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                <div className=\"d-flex justify-content-start mt-2\">\r\n                    <div className=\"outerBox messageBox bg-white fromOther\">\r\n                        <div className=\"messageText\">{ReactEmoji.emojify(message.data)}</div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        )\r\n    }\r\n\r\n    // TODO: See \"Chat.js\" TODO for everything there is to consider here...\r\n    else if(message.type === Consts.msgTypes.CE_FIGHT) {\r\n        //console.log(`Message created. From self: ${fromSelf}, provocation text: \"${data.msgProvoke}\"`);\r\n        return( <IBFightOutcome message={message} chatPtnrName={chatPtnrName} /> );\r\n    }\r\n    else if(message.type === Consts.msgTypes.CE_TRAP) {\r\n        return( <IBTrapOutcome message={message} chatPtnrName={chatPtnrName} /> );\r\n    }\r\n    else if(message.type === Consts.msgTypes.CE_BLANK) {\r\n        return( <IBBlankOutcome message={message} chatPtnrName={chatPtnrName} /> );\r\n    }\r\n}\r\n\r\nexport default Message;","import React from 'react';\r\n\r\nconst PageTitleBar = ({ BackFunc, title, subtitle }) => (\r\n    <div>\r\n        <div className=\"maxW1000 m-0Auto position-relative\">\r\n            <button onClick={BackFunc} className=\"btn text-white posAbsAlignVert50pct\">\r\n                <i className=\"fas fa-arrow-left fa-lg\"></i>\r\n            </button>\r\n            <div className=\"head3 text-center text-white\">\r\n                <div>{title}</div>\r\n                <small>{subtitle}</small>\r\n            </div>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport default PageTitleBar;","import React from 'react';\r\nimport PageTitleBar from '../../PageTitleBar';\r\nimport * as Consts from '../../../../../Consts';\r\n\r\nimport imgPunch from '../../../../../images/Punch_02_32x32.png';\r\nimport imgTackle from '../../../../../images/Tackle_01_32x32.png';\r\nimport imgKick from '../../../../../images/Kick_02_32x32.png';\r\n\r\nconst IBFightSetup = ({ ReturnToSelection, user_Chat_Active, LaunchChatEvent }) => {\r\n\r\n    var elem_Form = React.createRef();\r\n    var elem_ProvokeMsg = React.createRef();\r\n    var elem_WinMsg = React.createRef();\r\n    var elem_LoseMsg = React.createRef();\r\n    var elem_TieMsg = React.createRef();\r\n\r\n    var rounds = [];\r\n    for(let i = 0; i < Consts.FIGHT_MAX_ROUNDS; i++) {\r\n\r\n        const radioName = \"fightSelection_\" + i;\r\n        rounds.push(\r\n            <div key={i}>\r\n                <div className=\"d-flex justify-content-around\">\r\n                    <label className=\"noStyleLabel\" htmlFor={radioName + \"_\" + Consts.fightRoundActions.PUNCH}>\r\n                        <input type=\"radio\" id={radioName + \"_\" + Consts.fightRoundActions.PUNCH} name={radioName} value={Consts.fightRoundActions.PUNCH} defaultChecked={true} />\r\n                        <img src={imgPunch} alt=\"punch\" className=\"m-1\" />\r\n                    </label>\r\n                    <label className=\"noStyleLabel ml-1 mr-1\" htmlFor={radioName + \"_\" + Consts.fightRoundActions.TACKLE}>\r\n                        <input type=\"radio\" id={radioName + \"_\" + Consts.fightRoundActions.TACKLE} name={radioName} value={Consts.fightRoundActions.TACKLE} />\r\n                        <img src={imgTackle} alt=\"tackle\" className=\"m-1\" />\r\n                    </label>\r\n                    <label className=\"noStyleLabel\" htmlFor={radioName + \"_\" + Consts.fightRoundActions.KICK}>\r\n                        <input type=\"radio\" id={radioName + \"_\" + Consts.fightRoundActions.KICK} name={radioName} value={Consts.fightRoundActions.KICK} />\r\n                        <img src={imgKick} alt=\"kick\" className=\"m-1\" />\r\n                    </label>\r\n                </div>\r\n                {i < Consts.FIGHT_MAX_ROUNDS - 1 ? <hr className=\"bg-light mt-2 mb-2\" /> : \"\"}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const OnSend = (event) => {\r\n        event.preventDefault();\r\n\r\n        var actionsSent = [];\r\n        for(let i = 0; i < Consts.FIGHT_MAX_ROUNDS; i++) {\r\n            const btns = elem_Form.elements[\"fightSelection_\" + i];\r\n            for(let j = 0; j < btns.length; j++) {\r\n                if(btns[j].checked) {\r\n                    actionsSent.push(parseInt(btns[j].value));\r\n                }\r\n            }\r\n        }\r\n\r\n        // Cache values so setTimeout can use them despite being gone from original source.\r\n        const msgProvoke = elem_ProvokeMsg.current.value;\r\n        const msgWin = elem_WinMsg.current.value;\r\n        const msgLose = elem_LoseMsg.current.value;\r\n        const msgTie = elem_TieMsg.current.value;\r\n\r\n        // TODO: Validate inputs? LOW PRIORITY\r\n        LaunchChatEvent({ \r\n            type: Consts.msgTypes.CE_FIGHT,\r\n            data: {\r\n                step: Consts.fightSteps.INIT,\r\n                msgProvoke: msgProvoke\r\n            }              \r\n        }, false);\r\n\r\n        setTimeout(() => {\r\n            LaunchChatEvent({ \r\n                type: Consts.msgTypes.CE_FIGHT,\r\n                data: {\r\n                    step: Consts.fightSteps.INIT,\r\n                    msgProvoke: msgProvoke,\r\n                    msgWin: msgWin,\r\n                    msgLose: msgLose,\r\n                    msgTie: msgTie,\r\n                    actionsSent,\r\n                    actionsResp: []\r\n                }             \r\n            }, true);\r\n        }, Consts.CE_MSG_DELAY);\r\n    };\r\n\r\n    return (\r\n        <div className=\"h-100 w-100 d-flex flex-column\">\r\n            <PageTitleBar BackFunc={ReturnToSelection} title=\"Fight\" subtitle={user_Chat_Active ? \"\" : \" [user offline]\"} />\r\n            <div className=\"bg-secondary p-2 flex-grow-1 position-relative\" role=\"group\">\r\n                <fieldset disabled={!user_Chat_Active}>\r\n                    <form ref={form => elem_Form = form} className=\"maxW1000 m-0Auto reimplementScroll\">\r\n                        <div className=\"form-group\">\r\n                            <div className=\"head4 text-light\">Provocation</div>\r\n                            <input type=\"text\" className=\"form-control\" ref={elem_ProvokeMsg} placeholder=\"e.g. Put 'em up!\"></input>\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <div className=\"head4 text-light mb-2\">Actions</div>\r\n                            {rounds}\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <div className=\"head4 text-light\">Win message</div>\r\n                            <input type=\"text\" className=\"form-control\" ref={elem_WinMsg} placeholder=\"e.g. Don't mess with the champ!\"></input>\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <div className=\"head4 text-light\">Lose message</div>\r\n                            <input type=\"text\" className=\"form-control\" ref={elem_LoseMsg} placeholder=\"e.g. Pfft, barely a flesh wound...\"></input>\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <div className=\"head4 text-light\">Tie message</div>\r\n                            <input type=\"text\" className=\"form-control\" ref={elem_TieMsg} placeholder=\"e.g. Did we just become best friends?\"></input>\r\n                        </div>\r\n                        <button type=\"button\" className=\"btn bgLightBlue text-white m-0Auto innerScrollItem\" onClick={OnSend}>Send</button>\r\n                    </form>\r\n                </fieldset>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default IBFightSetup;","import React, { useState, useRef, createRef } from 'react';\r\nimport CanvasDraw from 'react-canvas-draw';\r\nimport { CompactPicker } from 'react-color';\r\n\r\nimport PageTitleBar from '../../PageTitleBar';\r\nimport * as Consts from '../../../../../Consts';\r\n\r\nconst IBTrapSetup = ({ ReturnToSelection, user_Chat_Active, LaunchChatEvent }) => {\r\n\r\n    const [sliderPct, SetSliderPct] = useState(50);\r\n    const [colour, SetColour] = useState('ff0000');\r\n    const [brushRadius, SetBrushRadius] = useState(3);\r\n\r\n    var canvasRef = useRef();\r\n\r\n    // TODO: Look-up & add small draw component, very simple, and make sure it's mobile friendly of course!\r\n    // TODO: Perhaps make this a combo gift/trap event, and add a slider here in setup to adjust the percentage chance of the trap being sprung.\r\n    // That way they can just drop the image if desired, otherwise gamify it. - This would keep the reciepients guessing as well.\r\n\r\n    var elem_GiftText = createRef();\r\n    var elem_SuccessMsg = createRef();\r\n    var elem_FailMsg = createRef();\r\n\r\n    const OnSend = (event) => {\r\n        event.preventDefault();\r\n\r\n        // Cache values so setTimeout can use them despite being gone from original source.\r\n        const giftText = elem_GiftText.current.value;\r\n        const giftCanvasSaveData = canvasRef.current.getSaveData();\r\n        const msgSuccess = elem_SuccessMsg.current.value;\r\n        const msgFail = elem_FailMsg.current.value;\r\n\r\n        // TODO: Validate inputs? LOW PRIORITY\r\n        LaunchChatEvent({ \r\n            type: Consts.msgTypes.CE_TRAP,\r\n            data: {\r\n                step: Consts.trapSteps.INIT,\r\n                giftText\r\n            }              \r\n        }, false);\r\n\r\n        setTimeout(() => {\r\n            LaunchChatEvent({ \r\n                type: Consts.msgTypes.CE_TRAP,\r\n                data: {\r\n                    step: Consts.trapSteps.INIT,\r\n                    sliderPct,\r\n                    giftText,\r\n                    giftCanvasSaveData,\r\n                    msgSuccess,\r\n                    msgFail\r\n                }             \r\n            }, true);\r\n        }, Consts.CE_MSG_DELAY);\r\n    };\r\n\r\n    const OnColourChangeComplete = (newColour) => {\r\n        SetColour(newColour.hex)\r\n    }\r\n    const CanvasUndo = () => {\r\n        canvasRef.current.undo();\r\n    }\r\n    const CanvasClear = () => {\r\n        canvasRef.current.clear()\r\n    }\r\n\r\n    return (\r\n        <div className=\"h-100 w-100 d-flex flex-column\">\r\n            <PageTitleBar BackFunc={ReturnToSelection} title=\"Gift\" subtitle={user_Chat_Active ? \"\" : \" [user offline]\"} />\r\n            <div className=\"bg-secondary p-2 flex-grow-1 position-relative\" role=\"group\">\r\n                <fieldset disabled={!user_Chat_Active}>\r\n                    <form className=\"maxW1000 m-0Auto reimplementScroll\">\r\n                        <div className=\"form-group\">\r\n                            <div className=\"head4 text-light\">Gift</div>\r\n                            <input type=\"text\" className=\"form-control\" ref={elem_GiftText} placeholder=\"e.g. 5 cents\"></input>\r\n                            <div id=\"DrawComponentContainer\" className=\"mt-3\">\r\n                                {/* Canvas */}\r\n                                <div className=\"m-2\">\r\n                                    <CanvasDraw \r\n                                        ref={canvasRef}\r\n                                        canvasWidth=\"250px\" \r\n                                        canvasHeight=\"250px\" \r\n                                        lazyRadius=\"5\"\r\n                                        brushColor={colour}\r\n                                        brushRadius={(isNaN(brushRadius) || brushRadius < 1) ? 1 : brushRadius}\r\n                                    />\r\n                                </div>\r\n                                <div id=\"CanvasControlsContainer\" className=\"mt-2\">\r\n                                    {/* Colour Picker */}\r\n                                    <CompactPicker\r\n                                        color={colour}\r\n                                        onChangeComplete={OnColourChangeComplete}\r\n                                    />\r\n                                    {/* Controls */}\r\n                                    <div className=\"mt-3 d-flex justify-content-around align-items-end\">\r\n                                        <button type=\"button\" className=\"btn bgLightBlue text-white\" onClick={CanvasUndo}>Undo</button>\r\n                                        <button type=\"button\" className=\"btn bgLightBlue text-white ml-1\" onClick={CanvasClear}>Clear</button>\r\n                                        <div className=\"ml-1\">\r\n                                            <small className=\"text-white\">Brush-Radius:</small>\r\n                                            <input type=\"number\"\r\n                                                className=\"form-control\"\r\n                                                value={brushRadius}\r\n                                                onChange={e => SetBrushRadius(parseInt(e.target.value, 10) || '')}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"form-group mt-3\">\r\n                            <div className=\"head4 text-light\">Trap activation chance</div>\r\n                            <div className=\"d-flex align-items-center\">\r\n                                <input type=\"range\" min=\"0\" max=\"100\" value={sliderPct} className=\"flex-grow-1\" onChange={event => SetSliderPct(event.target.value)} />\r\n                                <div className=\"ml-2 text-center text-light font-weight-bold w50p\">{sliderPct}%</div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <div className=\"head4 text-light\">Success message</div>\r\n                            <input type=\"text\" className=\"form-control\" ref={elem_SuccessMsg} placeholder=\"e.g. Was it really worth the risk?!\"></input>\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <div className=\"head4 text-light\">Fail message</div>\r\n                            <input type=\"text\" className=\"form-control\" ref={elem_FailMsg} placeholder=\"e.g. Don't spend it all in one place!\"></input>\r\n                        </div>\r\n                        <button type=\"button\" className=\"btn bgLightBlue text-white m-0Auto innerScrollItem\" onClick={OnSend}>Send</button>\r\n                    </form>\r\n                </fieldset>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default IBTrapSetup;","import React from 'react';\r\n\r\nconst TemplateSetupStatement = () => (\r\n    <div className=\"form-group m-0\">\r\n        <div><input type=\"text\" className=\"form-control statementPreBlank\" placeholder=\"Pre-blank text\"></input></div>\r\n        <div><input type=\"text\" className=\"form-control statementAsBlank\" placeholder=\"Shown-as-blank text\"></input></div>\r\n        <div><input type=\"text\" className=\"form-control statementPostBlank\" placeholder=\"Post-blank text\"></input></div>\r\n    </div>\r\n);\r\n\r\nexport default TemplateSetupStatement;","import React, { useState } from 'react';\r\n\r\nimport PageTitleBar from '../../PageTitleBar';\r\nimport * as Consts from '../../../../../Consts';\r\n\r\nimport TemplateSetupStatement from './template_SetupStatement';\r\n\r\nconst IBBlankSetup = ({ ReturnToSelection, user_Chat_Active, LaunchChatEvent }) => {\r\n\r\n    const [statementCount, SetStatementCount] = useState(1);\r\n\r\n    var elem_Form = React.createRef();\r\n    var elem_RevealAllCheckbox = React.createRef();\r\n\r\n    const OnAdd = (event) => {\r\n        event.preventDefault();\r\n\r\n        SetStatementCount(statementCount + 1);\r\n    };\r\n\r\n    const OnSend = (event) => {\r\n        event.preventDefault();\r\n\r\n        var statements = [];\r\n        const lis = elem_Form.getElementsByClassName(\"statementLI\");\r\n\r\n        for(let i = 0; i < lis.length; i++) {\r\n            const elemPreBlank = lis[i].getElementsByClassName(\"statementPreBlank\")[0];\r\n            const elemAsBlank = lis[i].getElementsByClassName(\"statementAsBlank\")[0];\r\n            const elemPostBlank = lis[i].getElementsByClassName(\"statementPostBlank\")[0];\r\n\r\n            // The field to be blank must contain something, as well as at least one of the fields that come before or after.\r\n            if(elemAsBlank.value !== \"\" && (elemPreBlank.value !== \"\" || elemPostBlank.value !== \"\")) {\r\n                statements.push({\r\n                    preBlank: elemPreBlank.value,\r\n                    asBlank: elemAsBlank.value,\r\n                    blankGuess: \"\", // This will become populated by the recipient, one-by-one.\r\n                    guessMatch: false,\r\n                    postBlank: elemPostBlank.value\r\n                });\r\n            }\r\n        }\r\n\r\n        const revealAllAtOnce = elem_RevealAllCheckbox.checked;\r\n\r\n        LaunchChatEvent({ \r\n            type: Consts.msgTypes.CE_BLANK,\r\n            data: { \r\n                step: Consts.blankSteps.INIT\r\n            }              \r\n        }, false);\r\n\r\n        setTimeout(() => {\r\n            LaunchChatEvent({ \r\n                type: Consts.msgTypes.CE_BLANK,\r\n                data: { \r\n                    step: Consts.blankSteps.INIT,\r\n                    statements,\r\n                    revealAllAtOnce\r\n                }             \r\n            }, true);\r\n        }, Consts.CE_MSG_DELAY);\r\n    };\r\n\r\n    var html_setupStatements = [];\r\n    for(let i = 0; i < statementCount; i++) {\r\n        html_setupStatements.push(<TemplateSetupStatement />);\r\n    }\r\n\r\n    return (\r\n        <div className=\"h-100 w-100 d-flex flex-column\">\r\n            <PageTitleBar BackFunc={ReturnToSelection} title=\"Blanks\" subtitle={user_Chat_Active ? \"\" : \" [user offline]\"} />\r\n            <div className=\"bg-secondary p-2 flex-grow-1 position-relative\" role=\"group\">\r\n                <fieldset disabled={!user_Chat_Active}>\r\n                    <form ref={form => elem_Form = form} className=\"maxW1000 m-0Auto reimplementScroll\">\r\n                        <label className=\"text-light small\">Select a number of statements, and a portion of each to be presented as \"______\" to the recipient, who will fill in their own blanks before seeing yours.</label>\r\n                        <label className=\"text-light small\">Any statement setups without at least some text before or after the \"shown-as-blank\" text will be ignored.</label>\r\n                        <label className=\"text-light small\">e.g. \"Show me your _________, and I'm all yours!\" (blank: collection of human thumbs)</label>\r\n                        \r\n                        <ul className=\"list-group d-flex flex-column mt-2\">\r\n                            { \r\n                                html_setupStatements.map((statement, i) => \r\n                                    <li className=\"list-group-item flex-grow-1 maxW1000 m-0 mt-2 p-2 innerScrollItem statementLI\" key={i}>\r\n                                        {statement}\r\n                                    </li>\r\n                                )\r\n                            }\r\n                        </ul>\r\n\r\n                        <div>\r\n                            <button type=\"button\" className=\"btn bgLightBlue text-white m-0Auto mt-2\" onClick={OnAdd}>\r\n                                <i className=\"fas fa-plus-circle fa-2x\"></i>\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"form-check mt-3\">\r\n                            <input type=\"checkbox\" ref={checkbox => elem_RevealAllCheckbox = checkbox} className=\"form-check-input\" id=\"RevealAllAtOnceCheck\"/>\r\n                            <label className=\"form-check-label text-light\" htmlFor=\"RevealAllAtOnceCheck\">Reveal all statements at once</label>\r\n                        </div>\r\n                        <button type=\"button\" className=\"btn bgLightBlue text-white m-0Auto mt-2 innerScrollItem\" onClick={OnSend}>Send</button>\r\n                    </form>\r\n                </fieldset>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default IBBlankSetup;","import React, { Component } from 'react';\r\nimport ScrollToBottom from 'react-scroll-to-bottom';\r\nimport * as Consts from '../../../Consts';\r\nimport PageTitleBar from './PageTitleBar';\r\nimport IBFightSetup from './IceBreakers/Fight/Setup';\r\nimport IBTrapSetup from './IceBreakers/Trap/Setup';\r\nimport IBBlankSetup from './IceBreakers/Blank/Setup';\r\n\r\nclass IceBreakerSelection extends Component {\r\n\r\n    state = {\r\n        iceBreaker: Consts.iceBreakers.NONE\r\n    }\r\n\r\n    // props: ReturnToChat, user_Chat_Active, LaunchChatEvent\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.ReturnToSelection = this.ReturnToSelection.bind(this);\r\n    }\r\n\r\n    ReturnToSelection() {\r\n        this.setState({ iceBreaker: Consts.iceBreakers.NONE });\r\n    }\r\n\r\n    render() {\r\n        if(this.state.iceBreaker === Consts.iceBreakers.NONE) {\r\n\r\n            return (\r\n                <div className=\"h-100 w-100 d-flex flex-column\">\r\n                    <PageTitleBar BackFunc={this.props.ReturnToChat} title=\"Ice Breakers\" subtitle={this.props.user_Chat_Active ? \"\" : \" [user offline]\"} />\r\n                    <div className=\"bg-secondary p-2 flex-grow-1 position-relative\" role=\"group\">\r\n                        <ScrollToBottom className=\"FullSpreadAbsElem\" scrollViewClassName=\"d-flex flex-column pad10\">\r\n                            {/* FIGHT */}\r\n                            <button \r\n                                type=\"button\"\r\n                                className=\"btn btn-lg bgLightBlue text-white m-0Auto minW50pct maxW1000 innerScrollItem\"\r\n                                onClick={() => this.setState({ iceBreaker: Consts.iceBreakers.FIGHT })}\r\n                                disabled={!this.props.user_Chat_Active}\r\n                            >\r\n                                <i className=\"fas fa-fist-raised fa-lg transFlipYRot90\"></i>\r\n                                <span className=\"ml-4\">FIGHT</span>\r\n                            </button>\r\n                            {/* TRAP */}\r\n                            <button\r\n                                type=\"button\"\r\n                                className=\"btn btn-lg bgLightBlue text-white m-0Auto mt-2 minW50pct maxW1000 innerScrollItem\"\r\n                                onClick={() => this.setState({ iceBreaker: Consts.iceBreakers.TRAP })}\r\n                                disabled={!this.props.user_Chat_Active}\r\n                            >\r\n                                {/*<i className=\"fas fa-dungeon fa-lg\"></i>*/}\r\n                                <i className=\"fas fa-gift fa-lg\"></i>\r\n                                <span className=\"ml-4\">GIFT</span>\r\n                            </button>\r\n                            {/* BLANK */}\r\n                            <button\r\n                                type=\"button\"\r\n                                className=\"btn btn-lg bgLightBlue text-white m-0Auto mt-2 minW50pct maxW1000 innerScrollItem\"\r\n                                onClick={() => this.setState({ iceBreaker: Consts.iceBreakers.BLANK })}\r\n                                disabled={!this.props.user_Chat_Active}\r\n                            >\r\n                                <i className=\"fas fa-eye-slash fa-lg\"></i>\r\n                                <span className=\"ml-4\">BLANKS</span>\r\n                            </button>\r\n                        </ScrollToBottom>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n        else if(this.state.iceBreaker === Consts.iceBreakers.FIGHT) {\r\n            return (<IBFightSetup \r\n                ReturnToSelection={this.ReturnToSelection} \r\n                user_Chat_Active={this.props.user_Chat_Active} \r\n                LaunchChatEvent={this.props.LaunchChatEvent}  \r\n            />);\r\n        }\r\n        else if(this.state.iceBreaker === Consts.iceBreakers.TRAP) {\r\n            return (<IBTrapSetup \r\n                ReturnToSelection={this.ReturnToSelection} \r\n                user_Chat_Active={this.props.user_Chat_Active} \r\n                LaunchChatEvent={this.props.LaunchChatEvent}  \r\n            /> );\r\n        }\r\n        else if(this.state.iceBreaker === Consts.iceBreakers.BLANK) {\r\n            return (<IBBlankSetup \r\n                ReturnToSelection={this.ReturnToSelection} \r\n                user_Chat_Active={this.props.user_Chat_Active} \r\n                LaunchChatEvent={this.props.LaunchChatEvent}  \r\n            /> );\r\n        }\r\n    }\r\n};\r\n\r\nexport default IceBreakerSelection;","import React from 'react';\r\nimport * as Consts from '../../../../../Consts';\r\n\r\nimport imgPunch from '../../../../../images/Punch_02_32x32.png';\r\nimport imgTackle from '../../../../../images/Tackle_01_32x32.png';\r\nimport imgKick from '../../../../../images/Kick_02_32x32.png';\r\n\r\nconst IBFightEngage = ({ eventData: { fromSelf, data }, SendMessage, UpdateEventData, ClearEvent, chatPtnrName}) => {\r\n    // data: { step, msgProvoke, msgWin, msgLose, msgTie, actionsSent, actionsResp:[] }\r\n\r\n    const OnBtnFight = (event) => {\r\n        event.preventDefault();\r\n\r\n        SendMessage({ \r\n            type: Consts.msgTypes.CE_FIGHT,\r\n            data: { step: Consts.fightSteps.ACCEPT }              \r\n        }, false);\r\n\r\n        setTimeout(() => {\r\n            UpdateEventData({ step: Consts.fightSteps.ACT });\r\n        }, Consts.CE_MSG_DELAY);\r\n    }\r\n\r\n    const OnBtnFlee = (event) => {\r\n        event.preventDefault();\r\n\r\n        SendMessage({ \r\n            type: Consts.msgTypes.CE_FIGHT,\r\n            data: { step: Consts.fightSteps.CANCEL }              \r\n        }, false);\r\n        ClearEvent();\r\n    }\r\n\r\n    const AssessRoundWinner = (actionOfSender, actionOfReponder) => {\r\n        if(actionOfSender === Consts.fightRoundActions.PUNCH) {\r\n            if(actionOfReponder === Consts.fightRoundActions.PUNCH)\r\n                return Consts.fightWinner.TIE\r\n            else if(actionOfReponder === Consts.fightRoundActions.TACKLE)\r\n                return Consts.fightWinner.SENDER\r\n            else if(actionOfReponder === Consts.fightRoundActions.KICK)\r\n                return Consts.fightWinner.RESPONDER\r\n        }\r\n        else if(actionOfSender === Consts.fightRoundActions.TACKLE) {\r\n            if(actionOfReponder === Consts.fightRoundActions.PUNCH)\r\n                return Consts.fightWinner.RESPONDER\r\n            else if(actionOfReponder === Consts.fightRoundActions.TACKLE)\r\n                return Consts.fightWinner.TIE\r\n            else if(actionOfReponder === Consts.fightRoundActions.KICK)\r\n                return Consts.fightWinner.SENDER\r\n        }\r\n        else if(actionOfSender === Consts.fightRoundActions.KICK) {\r\n            if(actionOfReponder === Consts.fightRoundActions.PUNCH)\r\n                return Consts.fightWinner.SENDER\r\n            else if(actionOfReponder === Consts.fightRoundActions.TACKLE)\r\n                return Consts.fightWinner.RESPONDER\r\n            else if(actionOfReponder === Consts.fightRoundActions.KICK)\r\n                return Consts.fightWinner.TIE\r\n        }\r\n    }\r\n\r\n    const OnAct = (event, fightAction) => {\r\n        event.preventDefault();\r\n\r\n        data.actionsResp.push(fightAction);\r\n\r\n        const actionSent = data.actionsSent[data.actionsResp.length - 1];\r\n\r\n        // This regular step will parse the given win/loss/tie and declare a winner, displaying the correct message for each battler.\r\n        SendMessage({ \r\n            type: Consts.msgTypes.CE_FIGHT,\r\n            data: {\r\n                step: Consts.fightSteps.ACT,\r\n                roundWinner: AssessRoundWinner(actionSent, fightAction),\r\n                actionSent: actionSent,\r\n                actionResp: fightAction\r\n            }              \r\n        }, false);\r\n\r\n        // Last action taken, fight over\r\n        if(data.actionsResp.length >= data.actionsSent.length) {\r\n            // The END step will parse the # of wins/losses/ties and declare a winner, displaying the correct message for each battler.\r\n            setTimeout(() => {\r\n\r\n                // Read all results and declare and make some declaration of winner.\r\n                var senderWins = 0;\r\n                var responderWins = 0;\r\n\r\n                for(let i = 0; i < data.actionsSent.length; i++) {\r\n                    const roundWinner = AssessRoundWinner(data.actionsSent[i], data.actionsResp[i]);\r\n                    if(roundWinner === Consts.fightWinner.SENDER)\r\n                        senderWins++;\r\n                    else if(roundWinner === Consts.fightWinner.RESPONDER)\r\n                        responderWins++;\r\n                }\r\n\r\n                // Messages were setup by Sender\r\n                var fightWinner = Consts.fightWinner.TIE;\r\n                var msgEnd = data.msgTie;\r\n                if(senderWins > responderWins) {\r\n                    fightWinner = Consts.fightWinner.SENDER;\r\n                    msgEnd = data.msgWin;\r\n                }\r\n                else if(senderWins < responderWins) {\r\n                    fightWinner = Consts.fightWinner.RESPONDER;\r\n                    msgEnd = data.msgLose;\r\n                }\r\n\r\n                ClearEvent();\r\n                SendMessage({ \r\n                    type: Consts.msgTypes.CE_FIGHT,\r\n                    data: { \r\n                        step: Consts.fightSteps.END,\r\n                        fightWinner,\r\n                        msgEnd\r\n                    }\r\n                }, false);\r\n            }, Consts.CE_MSG_DELAY);\r\n        }\r\n        // Fight continuing\r\n        else {\r\n            // This is simply acting as recussion, bringing us here again.\r\n            setTimeout(() => {\r\n                UpdateEventData({ step: Consts.fightSteps.ACT });\r\n            }, Consts.CE_MSG_DELAY);\r\n        }            \r\n    }\r\n\r\n    if(data.step === Consts.fightSteps.INIT) {\r\n        return (\r\n           fromSelf ? (\r\n                <div className=\"d-flex justify-content-center mt-2\">\r\n                    <div>\r\n                        <div className=\"messageText text-center text-white\">Awaiting response...</div>\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                <div className=\"d-flex justify-content-center mt-2\">\r\n                    <div className=\"messageBox\">\r\n                        <div className=\"messageText text-center text-white\">Your response?</div>\r\n                        <div className=\"d-flex justify-content-around bgLightBlue mt-1 p-2\">\r\n                            <button className=\"btn bg-warning mr-3\" onClick={OnBtnFight}>Fight</button>\r\n                            <button className=\"btn bg-danger text-white\" onClick={OnBtnFlee}>Flee</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        );\r\n    }\r\n    else if(data.step === Consts.fightSteps.ACT) {\r\n        return (\r\n           fromSelf ? (\r\n                <div className=\"d-flex justify-content-center mt-2\">\r\n                    <div className=\"messageBox bgLightBlue fromAdmin\">\r\n                        <div className=\"messageText text-center text-white\">Select a move:</div>\r\n                        <div className=\"d-flex justify-content-around mt-1 p-2\">\r\n                            <button className=\"btn bg-warning mr-3\" onClick={event => OnAct(event, Consts.fightRoundActions.PUNCH)}>\r\n                                <img src={imgPunch} alt=\"punch\" className=\"m-1\" />\r\n                            </button>\r\n                            <button className=\"btn bg-warning mr-3\" onClick={event => OnAct(event, Consts.fightRoundActions.TACKLE)}>\r\n                                <img src={imgTackle} alt=\"tackle\" className=\"m-1\" />\r\n                            </button>\r\n                            <button className=\"btn bg-warning\" onClick={event => OnAct(event, Consts.fightRoundActions.KICK)}>\r\n                                <img src={imgKick} alt=\"kick\" className=\"m-1\" />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                <div className=\"d-flex justify-content-center mt-2\">\r\n                    <div>\r\n                        <div className=\"messageText text-center text-white\">{chatPtnrName} is selecting a move...</div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        );\r\n    }\r\n    else return \"\";\r\n};\r\n\r\n\r\nexport default IBFightEngage;","import React from 'react';\r\nimport * as Consts from '../../../../../Consts';\r\n\r\nconst IBTrapEngage = ({ eventData: { fromSelf, data }, SendMessage, UpdateEventData, ClearEvent, chatPtnrName}) => {\r\n\r\n    const OnBtnAccept = (event) => {\r\n        event.preventDefault();\r\n\r\n        const randNum = Math.floor(Math.random() * 100) + 1;\r\n        const launchTrap = data.sliderPct >= randNum;\r\n\r\n        SendMessage({ \r\n            type: Consts.msgTypes.CE_TRAP,\r\n            data: { \r\n                step: Consts.trapSteps.ACCEPT,\r\n                launchTrap,\r\n                giftCanvasSaveData: data.giftCanvasSaveData\r\n            }             \r\n        }, false);\r\n\r\n        if(launchTrap) {\r\n            setTimeout(() => {\r\n                UpdateEventData({ step: Consts.trapSteps.STRUGGLE });\r\n            }, Consts.CE_MSG_DELAY);\r\n        }\r\n        else {\r\n            ClearEvent();\r\n        }\r\n    }\r\n\r\n    const OnBtnReject = (event) => {\r\n        event.preventDefault();\r\n\r\n        ClearEvent();\r\n\r\n        SendMessage({ \r\n            type: Consts.msgTypes.CE_TRAP,\r\n            data: { step: Consts.trapSteps.REJECT }              \r\n        }, false);\r\n    }\r\n\r\n    if(data.step === Consts.trapSteps.INIT) {\r\n        return (\r\n           fromSelf ? (\r\n                <div className=\"d-flex justify-content-center mt-2\">\r\n                    <div className=\"outerBox\">\r\n                        <div className=\"messageText fontSize90 text-center text-white\">Awaiting response...</div>\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                <div className=\"d-flex justify-content-center mt-2\">\r\n                    <div className=\"outerBox\">\r\n                        <div className=\"messageText fontSize90 text-center text-white\">Do you accept?</div>\r\n                        <div className=\"d-flex justify-content-around bgLightBlue mt-2 p-2\">\r\n                            <button className=\"btn bg-warning mr-3\" onClick={OnBtnAccept}>Accept</button>\r\n                            <button className=\"btn bg-danger text-white\" onClick={OnBtnReject}>Reject</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        );\r\n    }\r\n    else if(data.step === Consts.trapSteps.STRUGGLE) {\r\n        if(fromSelf) {\r\n            var btnPresses = 0\r\n            const OnBtnStruggle = (event) => {\r\n                event.preventDefault();\r\n                btnPresses++;\r\n            }\r\n\r\n            // TODO: Set interval or css animation..., make button flash to indicate the need to push repeatedly.\r\n\r\n            setTimeout(() => {\r\n                var msgEnd = data.msgFail;\r\n                // The trappee couldn't struggle enough, so the trap succeeded.\r\n                if(btnPresses < Consts.TRAP_STRUGGLE_COUNT) {\r\n                    msgEnd = data.msgSuccess;\r\n                }\r\n\r\n                ClearEvent();\r\n                SendMessage({ \r\n                    type: Consts.msgTypes.CE_TRAP,\r\n                    data: { \r\n                        step: Consts.trapSteps.END,\r\n                        trapSuccess: btnPresses < Consts.TRAP_STRUGGLE_COUNT,\r\n                        giftCanvasSaveData: data.giftCanvasSaveData,\r\n                        msgEnd\r\n                    }\r\n                }, false);\r\n            }, Consts.TRAP_STRUGGLE_TIME);\r\n\r\n            return (\r\n                <div className=\"d-flex justify-content-center mt-2\">\r\n                    <div className=\"outerBox messageBox bgLightBlue\">\r\n                        <div className=\"messageText text-center text-white\">But it's a trap!</div>\r\n                        <div className=\"d-flex justify-content-around mt-1 p-2\">\r\n                            <button className=\"btn btn-lg colourFlash font-weight-bold\" onClick={OnBtnStruggle}>!!STRUGGLE!!</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n        else {\r\n            return (\r\n                <div className=\"d-flex justify-content-center mt-2\">\r\n                    <div className=\"outerBox\">\r\n                        <div className=\"messageText fontSize90 text-center text-white\">Trap activated, struggle ensuing...</div>\r\n                    </div>\r\n                </div>\r\n             );\r\n        }\r\n    }\r\n};\r\n\r\nexport default IBTrapEngage;","import React from 'react';\r\nimport ReactEmoji from 'react-emoji';\r\nimport * as Consts from '../../../../../Consts';\r\n\r\nconst IBBlankEngage = ({ eventData: { fromSelf, data }, SendMessage, UpdateEventData, ClearEvent, chatPtnrName}) => {\r\n    // data: { statements: [{}] }\r\n\r\n    var elem_fillInput = React.createRef();\r\n\r\n    const OnBtnTry = (event) => {\r\n        event.preventDefault();\r\n\r\n        SendMessage({ \r\n            type: Consts.msgTypes.CE_BLANK,\r\n            data: { step: Consts.blankSteps.ACCEPT }              \r\n        }, false);\r\n\r\n        setTimeout(() => {\r\n            UpdateEventData({ step: Consts.blankSteps.FILL });\r\n        }, Consts.CE_MSG_DELAY);\r\n    }\r\n\r\n    const OnBtnDeny = (event) => {\r\n        event.preventDefault();\r\n\r\n        SendMessage({ \r\n            type: Consts.msgTypes.CE_BLANK,\r\n            data: { step: Consts.blankSteps.REJECT }              \r\n        }, false);\r\n        ClearEvent();\r\n    }\r\n\r\n    const OnFill = (event, blankIndex) => {\r\n        event.preventDefault();\r\n\r\n        // TODO\r\n        if(data.revealAllAtOnce) {\r\n            var inputElems = document.getElementsByClassName(\"blankInputElem\");\r\n\r\n            var matchCount = 0;\r\n            for(let i = 0; i < data.statements.length; i++) {\r\n                data.statements[i].blankGuess = inputElems[i].value;\r\n                data.statements[i].guessMatch = inputElems[i].value.toLowerCase().trim() === data.statements[i].asBlank.toLowerCase().trim();\r\n\r\n                if(data.statements[i].guessMatch) {\r\n                    matchCount++;\r\n                }\r\n            }\r\n\r\n            SendMessage({ \r\n                type: Consts.msgTypes.CE_BLANK,\r\n                data: {\r\n                    step: Consts.blankSteps.FILL,\r\n                    statements: data.statements,\r\n                    revealAllAtOnce: data.revealAllAtOnce\r\n                }\r\n            }, false);\r\n\r\n            setTimeout(() => {\r\n                ClearEvent();\r\n                SendMessage({ \r\n                    type: Consts.msgTypes.CE_BLANK,\r\n                    data: { \r\n                        step: Consts.blankSteps.END,\r\n                        statementCount: data.statements.length,\r\n                        matchCount\r\n                    }\r\n                }, false);\r\n            }, Consts.CE_MSG_DELAY);\r\n        }\r\n        else {\r\n            data.statements[blankIndex].blankGuess = elem_fillInput.value;\r\n            data.statements[blankIndex].guessMatch = elem_fillInput.value.toLowerCase().trim() === data.statements[blankIndex].asBlank.toLowerCase().trim();\r\n\r\n            SendMessage({ \r\n                type: Consts.msgTypes.CE_BLANK,\r\n                data: {\r\n                    step: Consts.blankSteps.FILL,\r\n                    preBlank: data.statements[blankIndex].preBlank,\r\n                    asBlank: data.statements[blankIndex].asBlank,\r\n                    postBlank: data.statements[blankIndex].postBlank,\r\n                    blankGuess: data.statements[blankIndex].blankGuess,\r\n                    guessMatch: data.statements[blankIndex].guessMatch\r\n                }\r\n            }, false);\r\n\r\n            // TODO: Prompt for next blank fill-in, or end event if there are no more.\r\n            if(data.statements[data.statements.length - 1].blankGuess === \"\") {\r\n                // This is simply acting as recussion, bringing us here again.\r\n                setTimeout(() => {\r\n                    UpdateEventData({ \r\n                        step: Consts.blankSteps.FILL,\r\n                        statements: data.statements\r\n                    });\r\n                }, Consts.CE_MSG_DELAY);\r\n            }\r\n            else {\r\n                // The END step will parse the # of wins/losses/ties and declare a winner, displaying the correct message for each battler.\r\n                setTimeout(() => {\r\n\r\n                    let matchCount = 0;\r\n                    for(let i = 0; i < data.statements.length; i++) {\r\n                        if(data.statements[i].guessMatch)\r\n                            matchCount++;\r\n                    }\r\n\r\n                    ClearEvent();\r\n                    SendMessage({ \r\n                        type: Consts.msgTypes.CE_BLANK,\r\n                        data: { \r\n                            step: Consts.blankSteps.END,\r\n                            statementCount: data.statements.length,\r\n                            matchCount\r\n                        }\r\n                    }, false);\r\n                }, Consts.CE_MSG_DELAY);\r\n            }\r\n        }\r\n    }\r\n\r\n    if(data.step === Consts.blankSteps.INIT) {\r\n        return (\r\n           fromSelf ? (\r\n                <div className=\"d-flex justify-content-center mt-2\">\r\n                    <div className=\"outerBox\">\r\n                        <div className=\"messageText text-center text-white\">Awaiting response...</div>\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                <div className=\"d-flex justify-content-center mt-2\">\r\n                    <div className=\"outerBox\">\r\n                        <div className=\"messageText text-center text-white\">Give it a try?</div>\r\n                        <div className=\"d-flex justify-content-around bgLightBlue mt-2 p-2\">\r\n                            <button className=\"btn bg-warning mr-3\" onClick={OnBtnTry}>Try</button>\r\n                            <button className=\"btn bg-danger text-white\" onClick={OnBtnDeny}>Deny</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        );\r\n    }\r\n    else if(data.step === Consts.blankSteps.FILL) {\r\n\r\n        var jsxArr = [];\r\n        var blankIndex = -1;\r\n\r\n        // In this case, loop through all statements and add them together into a single paragraph, meaning the inputs also need to all be managed at once.\r\n        if(data.revealAllAtOnce) {\r\n\r\n            for(let i = 0; i < data.statements.length; i++) {\r\n                jsxArr.push( \r\n                    <span key={i}>\r\n                        <span>{ReactEmoji.emojify(data.statements[i].preBlank)}</span>\r\n                        {\r\n                            fromSelf ? \r\n                            <input type=\"text\" className=\"bg-transparent text-danger inlineInput blankInputElem\" size={data.statements[i].asBlank.length} /> : \r\n                            <u className=\"text-danger\">{ReactEmoji.emojify(data.statements[i].asBlank)}</u>\r\n                        }\r\n                        <span>{ReactEmoji.emojify(data.statements[i].postBlank)}</span>\r\n                        &nbsp;\r\n                    </span>\r\n                )\r\n            }\r\n        }\r\n        // Otherwise, find the next statement that has not yet been guessed at, and present it alone.\r\n        else {\r\n            for(let i = 0; i < data.statements.length; i++) {\r\n                if(data.statements[i].blankGuess === \"\") {\r\n                    blankIndex = i;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            jsxArr.push( \r\n                <span key={blankIndex}>\r\n                    <span>{ReactEmoji.emojify(data.statements[blankIndex].preBlank)}</span>\r\n                    {\r\n                        fromSelf ? \r\n                        <input type=\"text\" ref={input => elem_fillInput = input} className=\"bg-transparent text-danger inlineInput\" size={data.statements[blankIndex].asBlank.length} /> : \r\n                        <u className=\"text-danger\">{ReactEmoji.emojify(data.statements[blankIndex].asBlank)}</u>\r\n                    }\r\n                    <span>{ReactEmoji.emojify(data.statements[blankIndex].postBlank)}</span>\r\n                </span>\r\n            )\r\n        }\r\n\r\n        if(fromSelf) {\r\n            return (\r\n                <div>\r\n                    <div className=\"d-flex justify-content-center mt-2\">\r\n                        <div className=\"outerBox\">\r\n                            <div className=\"messageText text-center text-white\">Fill in the blank:</div>\r\n                            <div className=\"messageText text-center messageBox fromAdminOfOther mt-2 mb-2\">\r\n                                { jsxArr }\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"d-flex justify-content-around mt-1 p-2\">\r\n                        <button className=\"btn bg-warning font-weight-bold\" onClick={event => OnFill(event, blankIndex)}>Submit</button>\r\n                    </div>\r\n                </div>\r\n            );        \r\n        }\r\n        else {\r\n            return (\r\n                <div className=\"d-flex justify-content-center mt-2\">\r\n                    <div className=\"outerBox\">\r\n                        <div className=\"messageText text-center text-white\">{chatPtnrName} is filling in the blank of:</div>\r\n                        <div className=\"messageText text-center messageBox fromAdminOfSelf mt-2 mb-2\">\r\n                            { jsxArr }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n    else return \"\";\r\n};\r\n\r\n\r\nexport default IBBlankEngage;","import React, { Component } from 'react';\r\nimport ScrollToBottom from 'react-scroll-to-bottom';\r\n\r\nimport * as Consts from '../../../Consts';\r\n\r\nimport UserInfoBar from './UserInfoBar';\r\nimport Message from './Message';\r\n\r\nimport IceBreakerSelection from './IceBreakerSelection';\r\nimport IBFightEngage from './IceBreakers/Fight/Engage';\r\nimport IBTrapEngage from './IceBreakers/Trap/Engage';\r\nimport IBBlankEngage from './IceBreakers/Blank/Engage';\r\n\r\nclass Chat extends Component {\r\n\r\n    state = {  \r\n        msgText: \"\",\r\n        preppingChatEvent: false\r\n    };\r\n\r\n    //props: {user_Chat, user_Chat_Active, PreppingCE, SendMessage, ToPageUsers}\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.SendText = this.SendText.bind(this);\r\n        this.LaunchChatEvent = this.LaunchChatEvent.bind(this);\r\n        this.ChooseIceBreaker = this.ChooseIceBreaker.bind(this);\r\n        this.ReturnToChat = this.ReturnToChat.bind(this);\r\n    }\r\n\r\n    // Specific to this class, wherin it resets the msgText\r\n    SendText (event) {\r\n        event.preventDefault();\r\n        if(!this.state.msgText) {\r\n            console.warn(\"Message not sent, must send more than nothing.\");\r\n            return;\r\n        }\r\n        if(!this.props.user_Chat_Active) {\r\n            console.warn(\"Message not sent, that user has been removed from the server.\");\r\n            return;\r\n        }\r\n\r\n        console.log(`SendMessage called in Chat.js, msgText: \"${this.state.msgText}\" to user: \"${this.props.user_Chat.id}\"`);\r\n\r\n        this.setState({ msgText: '' });\r\n        this.props.SendMessage({ \r\n            type: Consts.msgTypes.TEXT, \r\n            data: this.state.msgText\r\n        }, false);\r\n    };\r\n\r\n    // Specific to chat events, wherin the age returns here once they are sent, and chat with this user is disabled until the event is complete.\r\n    // TODO: Long-term: Can cancel event if it has not yet begun by recipient.\r\n    LaunchChatEvent(dataObj, asEvent) {\r\n        if(!this.props.user_Chat_Active) {\r\n            console.warn(\"Message not sent, that user has been removed from the server.\");\r\n            return;\r\n        }\r\n        \r\n        this.setState({ preppingChatEvent: false });\r\n        this.props.SendMessage(dataObj, asEvent);\r\n    }\r\n\r\n    ChooseIceBreaker (event) {\r\n        event.preventDefault();\r\n        this.setState({ preppingChatEvent: true });\r\n        this.props.PreppingCE(this.props.user_Chat.id, true);\r\n    }\r\n    ReturnToChat () {\r\n        this.setState({ preppingChatEvent: false });\r\n        this.props.PreppingCE(this.props.user_Chat.id, false);\r\n    }\r\n\r\n    render() {\r\n        if(this.state.preppingChatEvent) {\r\n            return (<IceBreakerSelection \r\n                ReturnToChat={this.ReturnToChat} \r\n                user_Chat_Active={this.props.user_Chat_Active} \r\n                LaunchChatEvent={this.LaunchChatEvent} \r\n            />);\r\n        }\r\n        else {\r\n\r\n            // Disable chat with this user if they left (\"account\" gone), or I've sent an event to them, until they complete it.\r\n            const disabled = !this.props.user_Chat_Active || this.props.user_Chat.disableSend;\r\n            const disableCE = this.props.user_Chat ? this.props.user_Chat.isPreppingCE : false;\r\n\r\n            // TODO: Event will play out once an ice breaker is selected.\r\n            //* Each Step (managed internally) will produce a resulting message, ideally the same message for both sender and Receiver\r\n            //* For example, and event step is a button/option, which when selected, is replaced with a message indicating what that selection was.\r\n            //* -1 event step, +1 message\r\n\r\n            // Rendering considerations:\r\n            // Sender event step - Should maybe just be a small message of what the receiver can do (e.g. \"Selecting move\") - Can easily be created as each new event message comes in.\r\n            // Sender message - Mostly the same for both parties\r\n            // Receiver event step - Interactive elements leading into messages\r\n            // Receiver message - Mostly the same for both parties\r\n\r\n            var chatEvent = \"\";\r\n            //console.log(this.props.user_Chat)\r\n            if(this.props.user_Chat.chatEvent && this.props.user_Chat.chatEventDisp) {\r\n                const evt = this.props.user_Chat.chatEvent;\r\n                //console.log(evt.type)\r\n                if(evt.type === Consts.msgTypes.CE_FIGHT)\r\n                    chatEvent = <IBFightEngage \r\n                        eventData={evt} \r\n                        SendMessage={this.props.SendMessage} \r\n                        UpdateEventData={this.props.UpdateEventData} \r\n                        ClearEvent={this.props.ClearEvent} \r\n                        chatPtnrName={this.props.user_Chat.name} \r\n                    />;\r\n                else if(evt.type === Consts.msgTypes.CE_TRAP)\r\n                    chatEvent = <IBTrapEngage \r\n                        eventData={evt} \r\n                        SendMessage={this.props.SendMessage} \r\n                        UpdateEventData={this.props.UpdateEventData} \r\n                        ClearEvent={this.props.ClearEvent} \r\n                        chatPtnrName={this.props.user_Chat.name} \r\n                    />;\r\n                else if(evt.type === Consts.msgTypes.CE_BLANK)\r\n                    chatEvent = <IBBlankEngage \r\n                        eventData={evt} \r\n                        SendMessage={this.props.SendMessage} \r\n                        UpdateEventData={this.props.UpdateEventData} \r\n                        ClearEvent={this.props.ClearEvent} \r\n                        chatPtnrName={this.props.user_Chat.name} \r\n                    />;\r\n            }\r\n\r\n            return (\r\n                <div className=\"h-100 d-flex flex-column justify-content-between\">\r\n                    <UserInfoBar ToPageUsers={this.props.ToPageUsers} user_Chat={this.props.user_Chat} user_Chat_Active={this.props.user_Chat_Active} />\r\n                    <div className=\"flex-grow-1 bg-secondary\">\r\n                        <div className=\"maxW1000 m-0Auto h-100 position-relative\">\r\n                            <ScrollToBottom className=\"FullSpreadAbsElem\" scrollViewClassName=\"pad10\">\r\n                                { \r\n                                    this.props.user_Chat.messages.map((message, i) => \r\n                                        <div className=\"innerScrollItem\" key={i}>\r\n                                            <Message message={message} chatPtnrName={this.props.user_Chat.name} />\r\n                                        </div>\r\n                                    )\r\n                                }\r\n                                <div className=\"innerScrollItem\"> \r\n                                    {chatEvent}\r\n                                </div>\r\n                            </ScrollToBottom>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"bg-secondary\">\r\n                        <form className=\"maxW1000 m-0Auto d-flex align-items-stretch p-2\">\r\n                            <button className=\"btn noBorder bgLightBlue text-white mr-2\" onClick={this.ChooseIceBreaker} disabled={disabled || disableCE}>\r\n                                <i className=\"fas fa-handshake fa-lg\"></i>\r\n                            </button>\r\n                            <input \r\n                                className=\"form-control form-control-lg flex-grow-1 noBorder\" \r\n                                type=\"text\" \r\n                                placeholder=\"message\" \r\n                                value={this.props.user_Chat_Active ? this.state.msgText : \"\"} \r\n                                onChange={(event) => this.setState({ msgText: event.target.value })} \r\n                                onKeyPress={event => event.key === \"Enter\" ? this.SendText(event) : null}\r\n                                disabled={disabled}\r\n                            />\r\n                            <button className=\"btn noBorder bg-white\" onClick={this.SendText} disabled={disabled}>\r\n                                <i className=\"fas fa-paper-plane fa-lg\"></i>\r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n};\r\n\r\nexport default Chat;","import React, { Component } from 'react';\r\nimport * as Consts from '../Consts';\r\nimport Users from './Lobby/Users/Users';\r\nimport Chat from './Lobby/Chat/Chat';\r\n\r\nclass PageSelection extends Component {\r\n\r\n    state = {\r\n        page: Consts.pages.USERS,\r\n        users: [],\r\n        user_Chat: null\r\n    };\r\n\r\n    // socket\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        // All messaging is saved per user, and effects by the users page by way of a \"new message\" indicator, and of course the chat page.\r\n        props.socket.on(\"RecNewUser\", (user) => {\r\n            console.log(`Adding user: \"${user.id}\"`);\r\n            this.setState({ users: [...this.state.users, user] });\r\n        });\r\n        props.socket.on(\"RemoveUser\", (userID) => {\r\n            console.log(`Removing user: \"${userID}\"`);\r\n            let removeIndex = this.state.users.findIndex((user) => user.id === userID);\r\n\r\n            if(removeIndex === -1)\r\n                return;\r\n\r\n            this.state.users.splice(removeIndex, 1);\r\n            this.setState({ users: this.state.users });\r\n\r\n            //* In lieu of this, check if the user_Chat is still in the general users list, and if not, disable the chat features, but just leave the existing messages up.\r\n            // if(this.state.user_Chat)\r\n            //     if(this.state.user_Chat.id === userID)\r\n            //         this.setState({ user_Chat: null });\r\n        });\r\n        props.socket.on(\"RecLikeToggle\", (userData) => {\r\n            console.log(`Liked by user: \"${userData.socketID}\"`);\r\n            let changeIndex = this.state.users.findIndex((user) => user.id === userData.socketID);\r\n            this.state.users[changeIndex].likesMe = userData.likesMe;\r\n            this.setState({ users: this.state.users });\r\n        });\r\n\r\n        props.socket.emit(\"GetUsers\", {}, (users) => {\r\n            for(let i = 0; i < users.length; i++) {\r\n                console.log(`Adding users: \"${users[i].id}\"`);\r\n                //console.log(`User image src: \"${users[i].imgSrc}\"`);\r\n            }\r\n\r\n            this.setState({ users });\r\n        });\r\n\r\n        props.socket.on(\"RecPreppingCE\", (data) => {\r\n            this.setState((prevState) => {\r\n                let changeIndex = prevState.users.findIndex((user) => user.id === data.chatPtnrID);\r\n                prevState.users[changeIndex].isPreppingCE = data.isPreppingCE;\r\n                if(prevState.user_Chat) {\r\n                    if(prevState.user_Chat.id === data.chatPtnrID)\r\n                        prevState.user_Chat.isPreppingCE = data.isPreppingCE;\r\n                }\r\n\r\n                return { \r\n                    users: prevState.users,\r\n                    user_Chat: prevState.user_Chat\r\n                }\r\n            });\r\n        });\r\n\r\n        // TODO: Make only one call from the server, 'RecMessage'\r\n        // That call sends the chatPtnrID, a type, and data.\r\n        // The type is what kind of message (text, fight, trap, etc.)\r\n        // And the data will futher specify (test:message, ice breaker:details of which step they're on)\r\n        // Data sent to the message component, where it's read and deciphered and html is built\r\n\r\n        props.socket.on('RecMessage', (recObj) => {\r\n            //console.log(`Received message, type: \"${recObj.msgData.type}\" chatting with user: \"${recObj.msgData.chatPtnrID}\", with data:`, recObj.msgData.data);\r\n            \r\n            this.setState((prevState) => {\r\n\r\n                let changeIndex = prevState.users.findIndex(({ id }) => id === recObj.msgData.chatPtnrID);\r\n                const moddedMsgObj = { ...recObj.msgData, fromSelf: false };\r\n    \r\n                // Hold event in seperate container while it's running, and build messages up as it executes.\r\n                if(recObj.isEvent) {\r\n                    prevState.users[changeIndex].chatEvent = moddedMsgObj;\r\n                    prevState.users[changeIndex].chatEventDisp = true;\r\n                    prevState.users[changeIndex].disableSend = true;\r\n                }\r\n                else {\r\n                    prevState.users[changeIndex].messages.push(moddedMsgObj);\r\n                    prevState.users[changeIndex].chatEventDisp = false;\r\n                }\r\n\r\n                var unreadMsg = true;\r\n                if(this.state.user_Chat) {\r\n                    if(this.state.user_Chat.id === recObj.msgData.chatPtnrID)\r\n                        unreadMsg = false;\r\n                }\r\n\r\n                prevState.users[changeIndex].unreadMsg = unreadMsg\r\n    \r\n                return { \r\n                    users: prevState.users,\r\n                    user_Chat: unreadMsg === false ? prevState.users[changeIndex] : null\r\n                }\r\n            }); \r\n        });\r\n\r\n        props.socket.on('RecUpdateEvent', (recObj) => {\r\n            this.setState((prevState) => {\r\n                let changeIndex = prevState.users.findIndex(({ id }) => id === recObj.chatPtnrID);\r\n                var moddedMsgObj = { ...prevState.users[changeIndex].chatEvent, fromSelf: false };\r\n                moddedMsgObj.data = { ...moddedMsgObj.data, ...recObj.updatedData };\r\n\r\n                prevState.users[changeIndex].chatEvent = moddedMsgObj;\r\n                prevState.users[changeIndex].chatEventDisp = true;\r\n\r\n                return { \r\n                    users: prevState.users,\r\n                    user_Chat: prevState.users[changeIndex]\r\n                } \r\n            });\r\n        });\r\n\r\n        props.socket.on('RecClearEvent', (chatPtnrID) => {\r\n            this.setState((prevState) => {\r\n                let changeIndex = prevState.users.findIndex(({ id }) => id === chatPtnrID);\r\n                prevState.users[changeIndex].chatEvent = null;\r\n                prevState.users[changeIndex].disableSend = false;\r\n    \r\n                return { \r\n                    users: prevState.users,\r\n                    user_Chat: prevState.users[changeIndex]\r\n                } \r\n            });\r\n        });\r\n\r\n        this.ToPageUsers = this.ToPageUsers.bind(this);\r\n        this.LikeUserToggle = this.LikeUserToggle.bind(this);\r\n        this.ToPageChat = this.ToPageChat.bind(this);\r\n        this.PreppingCE = this.PreppingCE.bind(this);\r\n        this.SendMessage = this.SendMessage.bind(this);\r\n        this.UpdateEventData = this.UpdateEventData.bind(this);\r\n        this.ClearEvent = this.ClearEvent.bind(this);\r\n    }\r\n\r\n    ToPageUsers () {\r\n        this.setState({ \r\n            user_Chat: null, \r\n            page: Consts.pages.USERS \r\n        });\r\n    };\r\n\r\n    LikeUserToggle (userID, isLiked) {\r\n        this.props.socket.emit(\"LikeUserToggle\", { userID, isLiked });\r\n        this.setState(prevState => ({ \r\n            users: prevState.users.map((elem) => elem.id === userID ? {...elem, likeThem: isLiked } : elem)\r\n        }));\r\n    };\r\n\r\n    // User_chat being set from this param.\r\n    ToPageChat (user_Chat) {\r\n        this.setState(prevState => ({ \r\n            users: prevState.users.map((elem) => elem.id === user_Chat.id ? {...elem, unreadMsg: false } : elem),\r\n            user_Chat, \r\n            page: Consts.pages.CHAT \r\n        }));\r\n    }\r\n\r\n    PreppingCE (chatPtnrID, isPreppingCE) {\r\n        this.props.socket.emit(\"PreppingCE\", { chatPtnrID, isPreppingCE });\r\n    }\r\n\r\n    // Update my own message view, not required from server\r\n    SendMessage (msgData, isEvent) {\r\n        \r\n        this.props.socket.emit('SendMessage', {\r\n            msgData: { ...msgData, chatPtnrID: this.state.user_Chat.id },\r\n            isEvent\r\n        });\r\n\r\n        this.setState((prevState) => {\r\n            \r\n            let changeIndex = prevState.users.findIndex(({ id }) => id === prevState.user_Chat.id);\r\n            const moddedMsgObj = { ...msgData, fromSelf: true };\r\n\r\n            if(isEvent) {\r\n                prevState.users[changeIndex].chatEvent = moddedMsgObj;\r\n                prevState.users[changeIndex].chatEventDisp = true;\r\n                prevState.users[changeIndex].disableSend = true;\r\n            }\r\n            else {\r\n                prevState.users[changeIndex].messages.push(moddedMsgObj);\r\n                prevState.users[changeIndex].chatEventDisp = false;\r\n            }\r\n\r\n            //console.log(prevState);\r\n\r\n            return { \r\n                users: prevState.users,\r\n                user_Chat: prevState.users[changeIndex]\r\n            } \r\n        });\r\n    }\r\n\r\n    // Update my own message view, not required from server\r\n    UpdateEventData (updatedData) {\r\n        this.props.socket.emit('UpdateEvent', { \r\n            updatedData,\r\n            chatPtnrID: this.state.user_Chat.id \r\n        });\r\n\r\n        this.setState((prevState) => {\r\n            \r\n            let changeIndex = prevState.users.findIndex(({ id }) => id === prevState.user_Chat.id);\r\n            var moddedMsgObj = { ...prevState.users[changeIndex].chatEvent, fromSelf: true };\r\n            moddedMsgObj.data = { ...moddedMsgObj.data, ...updatedData };\r\n\r\n            prevState.users[changeIndex].chatEvent = moddedMsgObj;\r\n            prevState.users[changeIndex].chatEventDisp = true;\r\n\r\n            console.log(prevState.users[changeIndex].chatEvent);\r\n\r\n            return { \r\n                users: prevState.users,\r\n                user_Chat: prevState.users[changeIndex]\r\n            } \r\n        });\r\n    }\r\n\r\n    // Update my own message view, not required from server\r\n    ClearEvent () {\r\n        this.props.socket.emit('ClearEvent', this.state.user_Chat.id);\r\n\r\n        this.setState((prevState) => {\r\n            \r\n            let changeIndex = prevState.users.findIndex(({ id }) => id === prevState.user_Chat.id);\r\n            prevState.users[changeIndex].chatEvent = null;\r\n            prevState.users[changeIndex].disableSend = false;\r\n\r\n            return { \r\n                users: prevState.users,\r\n                user_Chat: prevState.users[changeIndex]\r\n            } \r\n        });\r\n    }\r\n\r\n    render() {\r\n        //console.log(this.state);\r\n        if(this.state.page === Consts.pages.USERS)\r\n            return ( <Users users={this.state.users} LikeUserToggle={this.LikeUserToggle} ToPageChat={this.ToPageChat} /> );\r\n        else if(this.state.page === Consts.pages.CHAT) {\r\n            // Re-render if the user goes offline while being chatted with.\r\n            let user_Chat_Active = true;\r\n            if(this.state.user_Chat)\r\n                if(this.state.users.findIndex(({ id }) => id === this.state.user_Chat.id) === -1)\r\n                    user_Chat_Active = false;\r\n\r\n            return (<Chat \r\n                user_Chat={this.state.user_Chat}\r\n                user_Chat_Active={user_Chat_Active}\r\n                PreppingCE={this.PreppingCE}\r\n                SendMessage={this.SendMessage}\r\n                UpdateEventData={this.UpdateEventData}\r\n                ClearEvent={this.ClearEvent}\r\n                ToPageUsers={this.ToPageUsers}\r\n            />);\r\n        }\r\n    }\r\n};\r\n\r\nexport default PageSelection;","import React from 'react';\r\n\r\nconst LoadBar = ({ percent }) => {\r\n\r\n    const barStyle = { width: percent + \"%\" };\r\n\r\n    return (\r\n        <div id=\"ImageUploadBar\" className=\"progress position-absolute h-100 w-100\">\r\n            <div role=\"progressbar\" className=\"progress-bar progress-bar-striped bg-success progress-bar-animated transitionNone\" style={barStyle} aria-valuenow={percent} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LoadBar;","import React from 'react';\r\nimport LoadBar from './LoadBar';\r\n\r\nconst URL = window.URL || window.webkitURL;\r\nconst extArr = ['jpg', 'jpeg', 'png', 'gif'];\r\n\r\nconst ImgUpload = ({ GetImgDetails, imgSrc, orientation, isPortrait, disabled, willLoadFile, percent }) => {\r\n\r\n    const ImgChange = (event) => {\r\n        // Make sure only 1 file has been uploaded\r\n        if(event.target.files.length !== 1) {\r\n            alert(\"Can only use 1 photo at a time.\");\r\n            return;\r\n        }\r\n\r\n        // Make sure the file is an image\r\n        const fname = event.target.value;\r\n        const ext = fname.slice((fname.lastIndexOf(\".\") - 1 >>> 0) + 2);\r\n        if(extArr.indexOf(ext) === -1) {\r\n            alert('Image must have extension: jpg, jpeg, png, or gif');\r\n            return;\r\n        }\r\n\r\n        let file = event.target.files[0];\r\n\r\n        var img = new Image();\r\n        img.onload = () => { \r\n            console.log(\"img width: \" + img.width + \", height: \" + img.height);\r\n\r\n            //console.log(\"file:\", file);\r\n            //console.log(\"img.src:\", img.src);\r\n\r\n            GetImgDetails(ext, file, img.src, orientation, img.height > img.width);\r\n\r\n            // TAG: EXIF - Currently being handled by css {image-orientation: from-image;}, though this is still not widely supported.\r\n            // GetOrientation(file, function(orientation) {\r\n            //     // -2: not jpeg\r\n            //     // -1: not defined\r\n            //     console.log('orientation: ' + orientation);\r\n            //     GetImgDetails(ext, file, img.src, orientation, img.height > img.width);\r\n            // });\r\n        };\r\n        img.src = URL.createObjectURL(file);\r\n    };\r\n\r\n    const html_LoadBar = willLoadFile ? <LoadBar percent={percent} /> : \"\";\r\n    //console.log(`Main body called in ImgUpload.js`);\r\n\r\n    var imgTag = <img src={imgSrc} alt=\"User avatar\" className={isPortrait ? \"portrait\" : \"\"} />\r\n    // TAG: EXIF - Currently being handled by css {image-orientation: from-image;}, though this is still not widely supported.\r\n    // const UpdatedImg = (dataURL) => {\r\n    //     imgTag = <img src={dataURL} alt=\"User avatar\" className={isPortrait ? \"portrait\" : \"\"} />\r\n    //     console.log(`Image updated to correct orientation: ${orientation}`);\r\n    // }\r\n    // Consts.ResetOrientation(imgSrc, orientation, UpdatedImg)\r\n\r\n    return (\r\n        <div className=\"mt-2\">\r\n            {/* Container exists so that the image can keep it's aspect ratio and just can cut-off/masked by the container */}\r\n            <div id=\"AvatarSelected\" className=\"avatarsUserIdent rounded-circle mt-1 mb-1 mt-md-3 mb-md-3 mt-lg-5 mb-lg-5\">\r\n                {imgTag}\r\n            </div>\r\n\r\n            <input id=\"HiddenFileUploader\" placeholder=\"File\" className=\"d-none\" type=\"file\" accept=\"image/*\" capture=\"user\" onChange={ImgChange} disabled={disabled} />\r\n            {/* Clicking this button activates the hidden file button above.  */}\r\n            <button className=\"btn btn-secondary btn-lg btn-block mt-2 position-relative\" onClick={() => { document.getElementById(\"HiddenFileUploader\").click(); }} disabled={disabled}>\r\n                <span>Upload picture</span>\r\n                { html_LoadBar }\r\n            </button>\r\n        </div>\r\n    )\r\n\r\n};\r\n\r\nexport default ImgUpload;","import React from 'react';\r\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\r\nimport './StyleOverride.css';\r\n\r\nimport Join from './components/Join';\r\n\r\n\r\nconst App = () => (\r\n    <Router>\r\n        <Route path=\"/*\" exact component={Join} />\r\n    </Router>\r\n);\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.querySelector('#root'));","module.exports = __webpack_public_path__ + \"static/media/SpeechlessGuy.8d8d757b.png\";"],"sourceRoot":""}